<!-- FS SECURITY PLACEHOLDER INSERTED -->
<!doctype html>
<html lang="pt-BR">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FS - Planos &amp; Parcelamentos Zenir</title>
  <script>
// ===== AUTENTICAÇÃO GLOBAL FS SOLUÇÕES =====
    const FS_AUTH_KEY = 'fsAuthGlobal';
    const FS_AUTH_TOKEN = 'ok-@fildO1060'; // token global para todas as plataformas FS

    const FS_AUTH_LOG_KEY = 'fsAuthTentativas';

    function fsRegistrarTentativa(tipo) {
      try {
        const agora = new Date().toISOString();
        const payload = {
          tipo,
          data: agora,
          userAgent: navigator.userAgent || ''
        };
        const atual = JSON.parse(localStorage.getItem(FS_AUTH_LOG_KEY) || '[]');
        atual.push(payload);
        // mantém só as últimas 50 tentativas
        localStorage.setItem(FS_AUTH_LOG_KEY, JSON.stringify(atual.slice(-50)));
      } catch (e) {
        console.warn('[FS] Não foi possível registrar tentativa de acesso:', e);
      }
    }

    function fsVerificarAutenticacaoGlobal() {
      try {
        const token = localStorage.getItem(FS_AUTH_KEY);
        return token === FS_AUTH_TOKEN;
      } catch (e) {
        console.warn('[FS] Não foi possível ler o localStorage:', e);
        return false;
      }
    }

    function fsGarantirAutenticacaoGlobal() {
      // Se já tiver token salvo (por outro módulo ou pelo Index), libera direto
      if (fsVerificarAutenticacaoGlobal()) {
        return true;
      }

      let tentativas = 0;
      while (tentativas < 3) {
        const senha = window.prompt('Digite a senha de acesso ao sistema:');
        if (senha === null) {
          fsRegistrarTentativa('cancelou_senha');
          alert('Acesso cancelado.');
          return false;
        }
        if (senha === '@fildO1060') {
          try {
            localStorage.setItem(FS_AUTH_KEY, FS_AUTH_TOKEN);
          } catch (e) {
            console.warn('[FS] Não foi possível salvar o token de autenticação:', e);
          }
          return true;
        }
        tentativas++;
        fsRegistrarTentativa('senha_incorreta');
        alert('Senha incorreta. Tente novamente.');
      }

      fsRegistrarTentativa('bloqueio_por_tentativas');
      alert('Muitas tentativas inválidas. Acesso bloqueado.');
      return false;
    }

    

document.addEventListener('DOMContentLoaded', function () {
  try {
    if (!fsGarantirAutenticacaoGlobal()) {
      document.body.innerHTML = `
        <div style="
          min-height:100vh;
          display:flex;
          align-items:center;
          justify-content:center;
          background:#0f172a;
          color:#e5e7eb;
          font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
          text-align:center;
          padding:24px;
        ">
          <div>
            <h1 style="font-size:20px;margin-bottom:8px;">Acesso não autorizado</h1>
            <p style="font-size:14px;opacity:.8;">
              Atualize a página e tente novamente com a senha correta.
            </p>
          </div>
        </div>
      `;
    }
  } catch (e) {
    console.warn('[FS] Erro na autenticação global FS:', e);
  }
});
</script>

<script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
        }

        /* ===== ESTILOS DA PÁGINA DE LOGIN ===== */
        .login-page {
            min-height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        .login-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 119, 198, 0.2) 0%, transparent 50%);
            animation: backgroundFloat 20s ease-in-out infinite;
        }

        @keyframes backgroundFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-10px) rotate(1deg); }
            66% { transform: translateY(5px) rotate(-1deg); }
        }

        .login-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.1),
                0 0 0 1px rgba(255, 255, 255, 0.2);
            max-width: 450px;
            width: 100%;
            text-align: center;
            position: relative;
            z-index: 1;
            animation: loginFadeIn 1s ease-out;
        }

        @keyframes loginFadeIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Logo da Página de Login */
        .login-logo-container {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .login-logo-3d {
            width: 80px;
            height: 80px;
            position: relative;
            transform-style: preserve-3d;
            animation: loginLogoRotate 12s infinite linear;
        }

        @keyframes loginLogoRotate {
            0% { transform: rotateX(0deg) rotateY(0deg); }
            25% { transform: rotateX(90deg) rotateY(90deg); }
            50% { transform: rotateX(180deg) rotateY(180deg); }
            75% { transform: rotateX(270deg) rotateY(270deg); }
            100% { transform: rotateX(360deg) rotateY(360deg); }
        }

        .login-logo-3d .chart-face {
            position: absolute;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            border: 3px solid rgba(255,255,255,0.4);
            backdrop-filter: blur(10px);
        }

        .login-logo-3d .chart-front {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            transform: rotateY(0deg) translateZ(40px);
        }

        .login-logo-3d .chart-back {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            transform: rotateY(180deg) translateZ(40px);
        }

        .login-logo-3d .chart-right {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            transform: rotateY(90deg) translateZ(40px);
        }

        .login-logo-3d .chart-left {
            background: linear-gradient(135deg, #dc3545, #c82333);
            transform: rotateY(-90deg) translateZ(40px);
        }

        .login-logo-3d .chart-top {
            background: linear-gradient(135deg, #6f42c1, #5a32a3);
            transform: rotateX(90deg) translateZ(40px);
        }

        .login-logo-3d .chart-bottom {
            background: linear-gradient(135deg, #fd7e14, #e8590c);
            transform: rotateX(-90deg) translateZ(40px);
        }

        .login-logo-3d .chart-icon {
            width: 40px;
            height: 40px;
            fill: white;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
        }

        /* Título 3D */
        .login-title {
            margin-bottom: 30px;
        }

        .title-3d {
            margin: 0;
            font-family: 'Arial Black', Arial, sans-serif;
            text-align: center;
        }

        .title-line {
            display: block;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 3px;
            background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 4s ease-in-out infinite;
            text-shadow: 
                2px 2px 0px rgba(102, 126, 234, 0.3),
                4px 4px 0px rgba(118, 75, 162, 0.2),
                6px 6px 10px rgba(0, 0, 0, 0.1);
            transform: perspective(500px) rotateX(15deg);
            margin: 5px 0;
        }

        .title-line:first-child {
            font-size: 0.875rem;
            margin-bottom: 10px;
        }

        .title-line:nth-child(2) {
            font-size: 0.875rem;
            letter-spacing: 2px;
        }

        .title-line.subtitle {
            font-size: 0.9rem;
            color: #ff6b35;
            -webkit-text-fill-color: #ff6b35;
            background: none;
            margin-top: 10px;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Mensagem Motivacional */
        .motivational-message {
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            border-radius: 12px;
            border: 2px solid rgba(102, 126, 234, 0.2);
        }

        .motivational-message p {
            margin: 8px 0;
            font-size: 1rem;
            color: #333;
        }

        .motivational-message p:first-child {
            font-size: 1.1rem;
            color: #667eea;
        }

        /* Formulário de Login */
        .login-form {
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: #333;
            font-size: 1rem;
        }

        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 
                inset 0 2px 4px rgba(0, 0, 0, 0.05),
                0 0 0 3px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }

        .input-group input::placeholder {
            color: #999;
            font-style: italic;
        }

        /* Botão de Login */
        .login-btn {
            width: 100%;
            padding: 18px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 
                0 8px 20px rgba(102, 126, 234, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .login-btn:disabled {
            background: #ccc;
            color: #999;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        .login-btn:not(:disabled):hover {
            transform: translateY(-3px);
            box-shadow: 
                0 12px 25px rgba(102, 126, 234, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .login-btn:not(:disabled):active {
            transform: translateY(-1px);
            box-shadow: 
                0 6px 15px rgba(102, 126, 234, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .login-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .login-btn:not(:disabled):hover::before {
            left: 100%;
        }

        /* Boneco 3D Acenando */
        .boneco-3d {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 35px;
            height: 35px;
        }

        .boneco-container {
            position: relative;
            width: 30px;
            height: 30px;
            transform-style: preserve-3d;
            animation: bonecoFloat 3s ease-in-out infinite;
        }

        @keyframes bonecoFloat {
            0%, 100% { transform: translateY(0px) rotateY(0deg); }
            50% { transform: translateY(-3px) rotateY(10deg); }
        }

        .boneco-cabeca {
            position: absolute;
            top: 2px;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 8px;
            background: linear-gradient(135deg, #f4c2a1, #e8a87c, #d4956b);
            border-radius: 50%;
            border: 1px solid rgba(139, 69, 19, 0.3);
            box-shadow: 
                0 1px 3px rgba(0,0,0,0.2),
                inset 0 1px 1px rgba(255,255,255,0.4);
        }

        .boneco-corpo {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 10px;
            background: linear-gradient(135deg, #4a90e2 0%, #357abd 50%, #2c5aa0 100%);
            border-radius: 3px;
            border: 1px solid rgba(0,0,0,0.1);
            box-shadow: 
                0 1px 3px rgba(0,0,0,0.2),
                inset 0 1px 1px rgba(255,255,255,0.3);
        }

        .boneco-braco-esquerdo {
            position: absolute;
            top: 12px;
            left: 6px;
            width: 2px;
            height: 8px;
            background: linear-gradient(135deg, #f4c2a1, #e8a87c);
            border-radius: 1px;
            transform-origin: top center;
            animation: bracoEsquerdoMove 3s ease-in-out infinite;
            box-shadow: 0 1px 2px rgba(0,0,0,0.15);
        }

        @keyframes bracoEsquerdoMove {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            50% { transform: rotate(3deg); }
            75% { transform: rotate(-8deg); }
        }

        .boneco-braco-direito {
            position: absolute;
            top: 12px;
            right: 6px;
            width: 2px;
            height: 8px;
            background: linear-gradient(135deg, #f4c2a1, #e8a87c);
            border-radius: 1px;
            transform-origin: top center;
            animation: bracoDireitoAcenar 1.2s ease-in-out infinite;
            box-shadow: 0 1px 2px rgba(0,0,0,0.15);
        }

        @keyframes bracoDireitoAcenar {
            0%, 100% { transform: rotate(0deg); }
            20% { transform: rotate(-50deg); }
            40% { transform: rotate(-25deg); }
            60% { transform: rotate(-45deg); }
            80% { transform: rotate(-20deg); }
        }

        .boneco-mao-acenando {
            position: absolute;
            top: 8px;
            right: 2px;
            font-size: 8px;
            animation: maoAcenar 1.5s ease-in-out infinite;
            transform-origin: center;
        }

        @keyframes maoAcenar {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-15deg) scale(1.1); }
            50% { transform: rotate(10deg) scale(1.2); }
            75% { transform: rotate(-15deg) scale(1.1); }
        }

        .boneco-perna-esquerda {
            position: absolute;
            top: 20px;
            left: 11px;
            width: 2px;
            height: 8px;
            background: linear-gradient(135deg, #333, #555);
            border-radius: 1px;
            animation: pernaEsquerdaMove 2.5s ease-in-out infinite;
        }

        @keyframes pernaEsquerdaMove {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(5deg); }
        }

        .boneco-perna-direita {
            position: absolute;
            top: 20px;
            right: 11px;
            width: 2px;
            height: 8px;
            background: linear-gradient(135deg, #333, #555);
            border-radius: 1px;
            animation: pernaDireitaMove 2.5s ease-in-out infinite reverse;
        }

        @keyframes pernaDireitaMove {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(-5deg); }
        }

        /* Rodapé do Login */
        .login-footer {
            color: #666;
            font-size: 0.9rem;
        }

        .login-footer strong {
            color: #667eea;
        }

        /* Header Content */
        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            text-align: center;
        }

        .welcome-message {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 5px;
            font-weight: 500;
        }

        /* Animação de Transição */
        .fade-out {
            animation: fadeOut 0.5s ease-in-out forwards;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out forwards;
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0; transform: scale(0.95); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        /* Animações do Standby */
        @keyframes standbyIconFloat {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg) scale(1);
                filter: drop-shadow(0 0 20px rgba(255,255,255,0.5));
            }
            50% { 
                transform: translateY(-20px) rotate(10deg) scale(1.1);
                filter: drop-shadow(0 0 30px rgba(255,255,255,0.8));
            }
        }

        @keyframes standbyMessagePulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 20px rgba(255,255,255,0.1);
            }
            50% { 
                transform: scale(1.02);
                box-shadow: 0 0 40px rgba(255,255,255,0.2);
            }
        }

        @keyframes standbyBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @keyframes standbyParticleFloat {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) translateX(100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        :root {
            --azul: #e8f5ff;
            --amarelo: #ffc928;
            --linha: #f7f7f7;
            --borda: #d0d7e2;
            --input: #cfeeff;
            --ativo: #28a745;
            --inativo: #6c757d;
        }

        * {
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        body {
            margin: 0;
            padding: 8px;
            background: var(--azul);
            min-height: 100%;
        }

        .dashboard {
            max-width: 1200px;
            margin: auto;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .header {
            background: linear-gradient(135deg, #87CEEB, #4682B4);
            text-align: center;
            padding: 25px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(70, 130, 180, 0.3);
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        /* Estilos da Logo Gráfico 3D */
        .logo-3d {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .logo-container {
            width: 55px;
            height: 55px;
            position: relative;
            transform-style: preserve-3d;
            animation: rotateChart 8s infinite linear;
        }

        .chart-face {
            position: absolute;
            width: 55px;
            height: 55px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            border: 2px solid rgba(255,255,255,0.4);
            backdrop-filter: blur(5px);
        }

        .chart-front {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            transform: rotateY(0deg) translateZ(27.5px);
        }

        .chart-back {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            transform: rotateY(180deg) translateZ(27.5px);
        }

        .chart-right {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            transform: rotateY(90deg) translateZ(27.5px);
        }

        .chart-left {
            background: linear-gradient(135deg, #dc3545, #c82333);
            transform: rotateY(-90deg) translateZ(27.5px);
        }

        .chart-top {
            background: linear-gradient(135deg, #6f42c1, #5a32a3);
            transform: rotateX(90deg) translateZ(27.5px);
        }

        .chart-bottom {
            background: linear-gradient(135deg, #fd7e14, #e8590c);
            transform: rotateX(-90deg) translateZ(27.5px);
        }

        /* Ícones SVG para cada face */
        .chart-icon {
            width: 28px;
            height: 28px;
            fill: white;
            filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.5));
        }

        @keyframes rotateChart {
            0% { transform: rotateX(0deg) rotateY(0deg); }
            16.66% { transform: rotateX(45deg) rotateY(60deg); }
            33.33% { transform: rotateX(90deg) rotateY(120deg); }
            50% { transform: rotateX(135deg) rotateY(180deg); }
            66.66% { transform: rotateX(180deg) rotateY(240deg); }
            83.33% { transform: rotateX(225deg) rotateY(300deg); }
            100% { transform: rotateX(360deg) rotateY(360deg); }
        }

        /* Estilos do menu de três pontos */
        .menu-container {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .menu-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .menu-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.3);
        }

        .menu-dropdown {
            position: absolute;
            top: 45px;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            min-width: 180px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .menu-container {
            position: relative;
        }

        .menu-dropdown.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .menu-item {
            padding: 12px 16px;
            color: #333;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            border-bottom: 1px solid #f0f0f0;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-item:hover {
            background: #f8f9fa;
            color: #007bff;
            transform: translateX(5px);
        }

        .menu-item:first-child {
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
        }

        .menu-item:last-child {
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
        }

        .nav-tabs {
            display: flex;
            gap: 6px;
            margin: 32px auto 20px auto;
            justify-content: center;
            max-width: 900px;
            width: 100%;
        }

        .tab-btn {
            padding: 8px 6px;
            border: none;
            border-radius: 9px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.4s ease;
            font-size: 0.58rem;
            flex: 1;
            text-align: center;
            white-space: nowrap;
            line-height: 1.2;
            letter-spacing: 0.25px;
            text-transform: uppercase;
            box-shadow: 0 3.4px 6.8px rgba(0,0,0,0.255), 
                        0 1.7px 3.4px rgba(0,0,0,0.17),
                        inset 0 0.85px 1.7px rgba(255,255,255,0.255);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            position: relative;
            transform: perspective(500px) rotateX(15deg);
        }

        .tab-btn.active {
            background: linear-gradient(145deg, #32cd32, #228b22);
            color: white;
            transform: perspective(500px) rotateX(10deg) translateY(-4px);
            box-shadow: 0 5.1px 10.2px rgba(0,0,0,0.34), 
                        0 3.4px 6.8px rgba(0,0,0,0.255),
                        inset 0 1.275px 2.55px rgba(255,255,255,0.34),
                        0 0 8.5px rgba(50, 205, 50, 0.51);
        }

        .tab-btn:not(.active) {
            background: linear-gradient(145deg, #8a8a8a, #5a5a5a);
            color: white;
        }

        .tab-btn:hover {
            transform: perspective(500px) rotateX(8deg) translateY(-3px);
            box-shadow: 0 6.8px 13.6px rgba(0,0,0,0.34), 
                        0 3.4px 6.8px rgba(0,0,0,0.255),
                        inset 0 1.7px 3.4px rgba(255,255,255,0.34);
        }

        .tab-btn:active {
            transform: perspective(500px) rotateX(20deg) translateY(-1px);
            box-shadow: 0 1.7px 3.4px rgba(0,0,0,0.255);
        }

        .content-area {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
            min-height: 600px;
        }

        .inputs-section {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .card {
            border: 1px solid var(--borda);
            border-radius: 8px;
            padding: 16px;
            background: white;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: #333;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .row-centralizado {
            display: flex;
            flex-direction: column;
            gap: 8px;
            font-size: 0.8rem;
            margin-bottom: 16px;
            align-items: center;
            text-align: center;
        }

        .row-centralizado label {
            font-weight: 700;
            color: #333;
            font-size: 0.9rem;
        }

        .row-centralizado input {
            width: 100%;
            max-width: 200px;
            padding: 12px 15px;
            background: #e3f2fd;
            border-radius: 6px;
            border: 2px solid var(--borda);
            font-weight: 700;
            font-size: 1rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .row-centralizado input:focus {
            outline: none;
            border-color: var(--ativo);
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.2);
            transform: translateY(-2px);
        }

        .row {
            display: flex;
            gap: 10px;
            font-size: 0.8rem;
            margin-bottom: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .row label {
            min-width: 50px;
            font-weight: 600;
            flex-shrink: 0;
        }

        .row input {
            flex: 1;
            min-width: 120px;
            padding: 6px 10px;
            background: #e3f2fd;
            border-radius: 4px;
            border: 1px solid var(--borda);
            font-weight: 500;
            font-size: 0.8rem;
        }

        .row input:focus {
            outline: none;
            border-color: var(--ativo);
            box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.2);
        }

        .results-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid var(--borda);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
            margin-top: 15px;
            table-layout: fixed;
        }

        thead th {
            background: var(--amarelo);
            padding: 12px 8px;
            border: 1px solid var(--borda);
            text-align: center;
            font-weight: 700;
            font-size: 0.56rem;
            word-wrap: break-word;
        }

        /* Larguras específicas para cada coluna */
        thead th:nth-child(1) { width: 12%; } /* PRAZO */
        thead th:nth-child(2) { width: 18%; } /* CARNÊ/CARTÃO */
        thead th:nth-child(3) { width: 18%; } /* PRESTA MISTA */
        thead th:nth-child(4) { width: 17%; } /* (+) 36m */
        thead th:nth-child(5) { width: 17%; } /* (+) 24m */
        thead th:nth-child(6) { width: 18%; } /* (+) 12m */

        /* Para tabelas com 4 colunas (cartão) */
        .tab-content table thead th:nth-child(1) { width: 15%; } /* PRAZO */
        .tab-content table thead th:nth-child(2) { width: 25%; } /* CARTÃO */
        .tab-content table thead th:nth-child(3) { width: 20%; } /* (+) 36m */
        .tab-content table thead th:nth-child(4) { width: 20%; } /* (+) 24m */
        .tab-content table thead th:nth-child(5) { width: 20%; } /* (+) 12m */

        /* Para tabelas com subtópicos (gerente) */
        #gerente-content table thead th:nth-child(1) { width: 20%; } /* PRAZO */
        #gerente-content table thead th:nth-child(2) { width: 40%; } /* CARNÊ/CARTÃO EXCLUSIVO */
        #gerente-content table thead th:nth-child(3) { width: 40%; } /* PRESTA MISTA + G.E / G.E (+12) */

        #gerenteExclusivo-content table thead th:nth-child(1) { width: 15%; } /* PRAZO */
        #gerenteExclusivo-content table thead th:nth-child(2) { width: 28%; } /* CARNÊ NORMAL */
        #gerenteExclusivo-content table thead th:nth-child(3) { width: 28%; } /* COM PRESTA MISTA */
        #gerenteExclusivo-content table thead th:nth-child(4) { width: 29%; } /* COM G.E */

        /* Para tabela exclusivo com 3 colunas */
        #exclusivo-content table thead th:nth-child(1) { width: 20%; } /* PRAZO */
        #exclusivo-content table thead th:nth-child(2) { width: 40%; } /* CARNÊ EXCLUSIVO */
        #exclusivo-content table thead th:nth-child(3) { width: 40%; } /* CARTÃO EXCLUSIVO */

        tbody td {
            border: 1px solid var(--borda);
            padding: 8px 6px;
            text-align: center;
            font-size: 0.8rem;
            word-wrap: break-word;
            background: var(--linha);
            position: relative;
            min-height: 35px;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
        }

        tbody td:first-child {
            text-align: center;
            font-weight: 700;
            background: white;
            cursor: pointer;
            user-select: none;
        }

        tbody tr:hover td {
            background: #e3f2fd;
        }

        tbody td:not(:first-child) {
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
        }

        tbody td:not(:first-child):hover {
            background: #e3f2fd !important;
            transform: scale(1.02);
            font-weight: 700;
            border: 2px solid #2196f3 !important;
        }

        /* Linha selecionada fica toda verde */
        tbody tr.selected-row td {
            background: #4caf50 !important;
            border: 3px solid #2e7d32 !important;
            color: white !important;
            font-weight: 800 !important;
            box-shadow: 0 0 25px rgba(76, 175, 80, 0.8) !important;
            transform: scale(1.05) !important;
            z-index: 10 !important;
            position: relative !important;
        }

        /* Animação de pulso verde */
        @keyframes pulseGreen {
            0% { 
                box-shadow: 0 0 25px rgba(76, 175, 80, 0.8);
                transform: scale(1.05);
            }
            25% { 
                box-shadow: 0 0 35px rgba(76, 175, 80, 1);
                transform: scale(1.08);
            }
            50% { 
                box-shadow: 0 0 40px rgba(76, 175, 80, 1);
                transform: scale(1.08);
            }
            75% { 
                box-shadow: 0 0 35px rgba(76, 175, 80, 1);
                transform: scale(1.08);
            }
            100% { 
                box-shadow: 0 0 25px rgba(76, 175, 80, 0.8);
                transform: scale(1.05);
            }
        }

        tbody tr.selected-row td.pulse-animation {
            animation: pulseGreen 1.2s ease-in-out;
        }

        .footer {
            background: #333;
            color: #fff;
            text-align: center;
            padding: 10px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 20px;
        }

        .footer span {
            color: var(--amarelo);
            font-weight: 700;
        }

        /* Estilos para botões principais do cabeçalho */
        .main-toggle-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-weight: 800;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.4s ease;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            border: 3px solid rgba(255, 255, 255, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
            min-width: 180px;
            text-align: center;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .main-toggle-btn.active {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border-color: #28a745;
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.5);
            transform: translateY(-3px) scale(1.05);
        }

        .main-toggle-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.3);
        }

        .main-toggle-btn.active:hover {
            background: linear-gradient(135deg, #218838, #1ea085);
            transform: translateY(-4px) scale(1.08);
            box-shadow: 0 10px 25px rgba(40, 167, 69, 0.6);
        }

        /* Estilos para botões secundários do cabeçalho */
        .header-toggle-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .header-toggle-btn.active {
            background: #28a745;
            color: white;
            border-color: #28a745;
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.4);
        }

        .header-toggle-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .header-toggle-btn.active:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        /* Área do gerente */
        #gerenteCard {
            display: none;
        }

        /* Estilos para o campo de percentual do gerente */
        #percentGerente {
            background: white !important;
        }

        /* Alerta de autorização */
        .alerta-autorizacao {
            margin: 10px 0;
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.8rem;
            text-align: center;
            border: 2px solid;
            display: none;
        }

        .alerta-verde {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .alerta-amarelo {
            background: #fff3cd;
            border-color: #ffc107;
            color: #856404;
        }

        .alerta-vermelho {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        .alerta-preto {
            background: #f8f9fa;
            border-color: #343a40;
            color: #212529;
        }

        /* Valor com desconto do gerente */
        .valor-gerente {
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            background: #d4edda;
            border: 2px solid #28a745;
            text-align: center;
            display: none;
        }

        .valor-gerente label {
            font-size: 0.9rem;
            font-weight: 700;
            color: #155724;
            margin-bottom: 8px;
            display: block;
        }

        .valor-gerente input {
            background: #f8f9fa;
            border: 2px solid #28a745;
            color: #155724;
            font-size: 1.1rem;
            font-weight: 700;
            text-align: center;
            width: 100%;
            padding: 10px;
            border-radius: 6px;
            cursor: not-allowed;
        }

        @media (max-width: 768px) {
            /* Estilos Mobile para Login */
            .login-page {
                padding: 8px;
            }
            
            .login-container {
                padding: 20px 15px;
                max-width: 100%;
                margin: 10px;
            }
            
            .login-logo-3d {
                width: 60px;
                height: 60px;
            }
            
            .login-logo-3d .chart-face {
                width: 60px;
                height: 60px;
            }
            
            .login-logo-3d .chart-icon {
                width: 30px;
                height: 30px;
            }
            
            .login-logo-3d .chart-front { transform: rotateY(0deg) translateZ(30px); }
            .login-logo-3d .chart-back { transform: rotateY(180deg) translateZ(30px); }
            .login-logo-3d .chart-right { transform: rotateY(90deg) translateZ(30px); }
            .login-logo-3d .chart-left { transform: rotateY(-90deg) translateZ(30px); }
            .login-logo-3d .chart-top { transform: rotateX(90deg) translateZ(30px); }
            .login-logo-3d .chart-bottom { transform: rotateX(-90deg) translateZ(30px); }
            
            .title-line:first-child {
                font-size: 1.5rem;
            }
            
            .title-line:nth-child(2) {
                font-size: 0.9rem;
            }
            
            .title-line.subtitle {
                font-size: 1.2rem;
            }
            
            .motivational-message {
                padding: 15px;
                margin-bottom: 20px;
            }
            
            .motivational-message p {
                font-size: 0.85rem;
            }
            
            .input-group input {
                padding: 12px 15px;
                font-size: 0.9rem;
            }
            
            .login-btn {
                padding: 15px 25px;
                font-size: 0.95rem;
            }
            
            /* Estilos Mobile para App Principal */
            body {
                padding: 4px;
            }
            
            .dashboard {
                padding: 8px;
                border-radius: 8px;
            }
            
            .header {
                font-size: 0.9rem;
                padding: 15px 8px;
                gap: 10px;
            }
            
            .header-content strong {
                font-size: 0.8rem;
            }
            
            .welcome-message {
                font-size: 0.7rem;
            }
            
            .main-toggle-btn {
                padding: 10px 15px;
                font-size: 0.7rem;
                min-width: 120px;
                letter-spacing: 0.5px;
            }
            
            .menu-container {
                position: absolute !important;
                top: 8px !important;
                right: 8px !important;
            }
            
            .menu-btn {
                width: 30px;
                height: 30px;
                font-size: 16px;
            }
            
            .menu-dropdown {
                min-width: 160px;
                right: 0;
            }
            
            .menu-item {
                padding: 10px 12px;
                font-size: 0.8rem;
            }
            
            .logo-container {
                width: 35px;
                height: 35px;
            }
            
            .chart-face {
                width: 35px;
                height: 35px;
            }
            
            .chart-icon {
                width: 18px;
                height: 18px;
            }
            
            .chart-front { transform: rotateY(0deg) translateZ(17.5px); }
            .chart-back { transform: rotateY(180deg) translateZ(17.5px); }
            .chart-right { transform: rotateY(90deg) translateZ(17.5px); }
            .chart-left { transform: rotateY(-90deg) translateZ(17.5px); }
            .chart-top { transform: rotateX(90deg) translateZ(17.5px); }
            .chart-bottom { transform: rotateX(-90deg) translateZ(17.5px); }
            
            .content-area {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .inputs-section {
                gap: 12px;
            }
            
            .card {
                padding: 12px;
            }
            
            .card-title {
                font-size: 0.85rem;
                margin-bottom: 12px;
            }
            
            .row-centralizado {
                gap: 6px;
                margin-bottom: 12px;
            }
            
            .row-centralizado label {
                font-size: 0.8rem;
            }
            
            .row-centralizado input {
                padding: 10px 12px;
                font-size: 0.9rem;
                max-width: 180px;
            }
            
            .row {
                gap: 8px;
                margin-bottom: 8px;
                font-size: 0.75rem;
            }
            
            .row label {
                min-width: 40px;
                font-size: 0.75rem;
            }
            
            .row input {
                min-width: 100px;
                padding: 5px 8px;
                font-size: 0.75rem;
            }
            
            .nav-tabs {
                flex-wrap: wrap;
                gap: 6px;
                margin: 20px auto 15px auto;
            }
            
            .tab-btn {
                font-size: 0.5rem;
                padding: 6px 8px;
                min-width: auto;
                flex: 1;
                min-width: calc(50% - 3px);
                transform: perspective(400px) rotateX(10deg);
            }
            
            .tab-btn.active {
                transform: perspective(400px) rotateX(5deg) translateY(-2px);
            }
            
            .tab-btn:hover {
                transform: perspective(400px) rotateX(3deg) translateY(-1.5px);
            }
            
            .results-section {
                padding: 12px;
            }
            
            .results-section h3 {
                font-size: 0.9rem;
                margin-bottom: 10px;
            }
            
            .results-section h4 {
                font-size: 0.75rem;
                padding: 6px;
                margin: 10px 0 8px 0;
            }
            
            table {
                font-size: 0.55rem;
                margin-top: 10px;
            }
            
            thead th {
                font-size: 0.45rem;
                padding: 6px 3px;
                line-height: 1.1;
            }
            
            tbody td {
                font-size: 0.5rem;
                padding: 4px 2px;
                line-height: 1.2;
            }
            
            tbody td:first-child {
                font-size: 0.55rem;
                font-weight: 800;
            }
            
            /* Alertas e valores do gerente em mobile */
            .alerta-autorizacao {
                padding: 8px;
                font-size: 0.7rem;
                margin: 8px 0;
            }
            
            .valor-gerente {
                padding: 10px;
                margin: 8px 0;
            }
            
            .valor-gerente label {
                font-size: 0.75rem;
                margin-bottom: 6px;
            }
            
            .valor-gerente input {
                font-size: 0.9rem;
                padding: 8px;
            }
            
            /* Footer em mobile */
            .footer {
                padding: 8px;
                font-size: 0.7rem;
                margin-top: 15px;
            }
        }
        
        /* Estilos para tablets (768px - 1024px) */
        @media (min-width: 769px) and (max-width: 1024px) {
            .dashboard {
                padding: 15px;
            }
            
            .header {
                padding: 20px 15px;
                font-size: 1.2rem;
            }
            
            .main-toggle-btn {
                padding: 14px 25px;
                font-size: 0.9rem;
                min-width: 160px;
            }
            
            .content-area {
                grid-template-columns: 320px 1fr;
                gap: 15px;
            }
            
            .tab-btn {
                font-size: 0.55rem;
                padding: 7px 8px;
            }
            
            table {
                font-size: 0.75rem;
            }
            
            thead th {
                font-size: 0.5rem;
                padding: 8px 6px;
            }
            
            tbody td {
                font-size: 0.7rem;
                padding: 6px 4px;
            }
        }
        
        /* Estilos para telas muito pequenas (até 480px) */
        @media (max-width: 480px) {
            .login-container {
                padding: 15px 10px;
                margin: 5px;
            }
            
            .title-line:first-child {
                font-size: 1.3rem;
            }
            
            .title-line:nth-child(2) {
                font-size: 0.8rem;
            }
            
            .title-line.subtitle {
                font-size: 1rem;
            }
            
            .main-toggle-btn {
                padding: 8px 12px;
                font-size: 0.65rem;
                min-width: 100px;
            }
            
            .header-content strong {
                font-size: 0.75rem;
            }
            
            .welcome-message {
                font-size: 0.65rem;
            }
            
            .tab-btn {
                font-size: 0.45rem;
                padding: 5px 6px;
            }
            
            .card {
                padding: 8px;
            }
            
            .row-centralizado input {
                max-width: 150px;
                padding: 8px 10px;
                font-size: 0.85rem;
            }
            
            table {
                font-size: 0.5rem;
            }
            
            thead th {
                font-size: 0.4rem;
                padding: 4px 1px;
            }
            
            tbody td {
                font-size: 0.45rem;
                padding: 3px 1px;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 
<!-- ===== AJUSTES CIRÚRGICOS MOBILE - FS ===== -->
<style>
@media (max-width: 480px) {

  /* Garante 100% largura sem rolagem lateral */
  body, .dashboard {
    width: 100% !important;
    overflow-x: hidden !important;
  }

  /* Compacta o card de Valores Principais */
  .inputs-section .card {
    padding: 8px !important;
  }

  .card-title {
    font-size: 0.8rem !important;
    margin-bottom: 8px !important;
  }

  /* Organiza PREÇO e ENTRADA lado a lado no mobile */
  .inputs-section .card .row-centralizado {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 6px !important;
    align-items: center !important;
  }

  .inputs-section .card .row-centralizado label {
    font-size: 0.7rem !important;
    font-weight: 700 !important;
  }

  .inputs-section .card .row-centralizado input {
    max-width: 100% !important;
    padding: 6px 6px !important;
    font-size: 0.75rem !important;
    height: 34px !important;
  }

  /* Campos +36 +24 +12 mais compactos */
  .row {
    gap: 6px !important;
    margin-bottom: 6px !important;
  }

  .row label {
    font-size: 0.65rem !important;
  }

  .row input {
    padding: 5px !important;
    font-size: 0.65rem !important;
  }

  /* Tabela de parcelamento em negrito e mais compacta */
  table {
    width: 100% !important;
  }

  thead th {
    font-size: 0.45rem !important;
    padding: 4px 2px !important;
  }

  tbody td {
    font-size: 0.5rem !important;
    padding: 4px 2px !important;
    font-weight: 700 !important;
  }

  tbody td:first-child {
    font-weight: 800 !important;
  }
}
</style>


<!-- ===== AJUSTE EXTRA - ORGANIZAÇÃO MODAL CALCULADORA ===== -->
<style>
/* Organiza o modal da calculadora para não precisar rolar */
#calculatorModal .modal-content {
  max-height: 90vh !important;
  overflow: hidden !important;
}

#calculatorModal .calculator-container {
  display: grid !important;
  grid-template-rows: auto 1fr auto !important;
  height: 100% !important;
}

/* Área dos botões em grade fixa */
#calculatorModal .calculator-keys {
  display: grid !important;
  grid-template-columns: repeat(4, 1fr) !important;
  gap: 6px !important;
}

/* Botões menores */
#calculatorModal button {
  padding: 10px 6px !important;
  font-size: 0.9rem !important;
}

/* Campo display compacto */
#calculatorModal .calculator-display {
  font-size: 1.2rem !important;
  padding: 10px !important;
}

/* Remove scroll interno */
#calculatorModal {
  overflow: hidden !important;
}

/* Mobile específico */
@media (max-width: 480px) {
  #calculatorModal .modal-content {
    width: 95% !important;
    max-height: 85vh !important;
  }
  
  #calculatorModal button {
    padding: 8px 4px !important;
    font-size: 0.8rem !important;
  }
}
</style>


<!-- ===== AJUSTE FINAL - POSIÇÃO CALCULADORA + REMOVER TEXTO COPIAR ===== -->
<style>
/* Sobe o modal da calculadora para dar visão da tabela atrás */
#calculatorModal .modal-content {
  margin-top: -40px !important;
}

/* Mobile: sobe um pouco mais */
@media (max-width: 480px) {
  #calculatorModal .modal-content {
    margin-top: -60px !important;
  }
}

/* Remove o texto "Copiar" (mantém ícone) */
#calculatorModal .btn-copy span,
#calculatorModal .btn-copy small,
#calculatorModal .btn-copy .label-text {
  display: none !important;
}
</style>


<!-- ===== AJUSTE EXTRA v8 - SUBIR MAIS A CALCULADORA (VISÃO DA TABELA) ===== -->
<style>
/* Sobe ainda mais o modal da calculadora (prioridade alta) */
#calculatorModal .modal-content{
  transform: translateY(-70px) !important;
}
@media (max-width: 480px){
  #calculatorModal .modal-content{
    transform: translateY(-110px) !important;
  }
}
</style>


<!-- ===== AJUSTE EXTRA - SUBIR MAIS CALCULADORA ===== -->
<style>
#calculatorModal .modal-content {
  transform: translateY(-120px) !important;
}

@media (max-width: 480px) {
  #calculatorModal .modal-content {
    transform: translateY(-160px) !important;
  }
}
</style>


<!-- ===== AJUSTE FINAL - CALCULADORA MENOR + MAIS ALTA (VISUALIZAR TABELA) ===== -->
<style>
/* Base: reduz um pouco o tamanho geral do modal e sobe mais */
#calculatorModal .modal-content{
  width: 420px !important;
  max-width: 92vw !important;
  max-height: 78vh !important;
  transform: translateY(-190px) !important;
  border-radius: 18px !important;
}

/* Display mais baixo */
#calculatorModal .calculator-display{
  padding: 10px !important;
  font-size: 1.05rem !important;
  height: 54px !important;
}

/* Teclas menores e grid mais compacto */
#calculatorModal .calculator-keys{
  gap: 6px !important;
}
#calculatorModal button{
  padding: 8px 6px !important;
  font-size: 0.82rem !important;
  border-radius: 10px !important;
}

/* Linha de botões grandes (C / backspace / ÷) mais compacta */
#calculatorModal .btn-row button{
  padding: 10px 6px !important;
}

/* Mobile: reduz mais e sobe mais (para mostrar a tabela por trás) */
@media (max-width: 480px){
  #calculatorModal .modal-content{
    width: 92vw !important;
    max-height: 72vh !important;
    transform: translateY(-220px) !important;
  }
  #calculatorModal .calculator-display{
    height: 50px !important;
    font-size: 1rem !important;
  }
  #calculatorModal button{
    padding: 7px 5px !important;
    font-size: 0.78rem !important;
  }
  /* Botões inferiores (Copiar / R$ / Fator / Usar) menores */
  #calculatorModal .bottom-actions button{
    padding: 9px 6px !important;
    font-size: 0.78rem !important;
  }
}
</style>


<!-- ===== v11 - CALCULADORA MENOR + MAIS ALTA (COM HOOKS REAIS) ===== -->
<style>
/* Overlay top-aligned to liberar a tabela por trás */
#calculatorModal.calc-overlay{
  align-items: flex-start !important;
  padding-top: 6px !important;
}

/* Modal menor e mais alto */
#calculatorModal .calc-modal{
  transform: translateY(-18px) !important;
  max-height: 62vh !important;
  overflow: hidden !important;
}

/* Display compacto */
#calculatorModal .calculator-display{
  font-size: 1rem !important;
  padding: 10px !important;
}

/* Teclas mais compactas */
#calculatorModal button{
  padding: 7px 6px !important;
  font-size: 0.78rem !important;
}

/* Botões de baixo compactos */
#calculatorModal .bottom-actions button{
  padding: 8px 6px !important;
  font-size: 0.75rem !important;
}

/* Esconde o texto "Copiar" sem mexer na lógica */
#calculatorModal .btn-copy{
  line-height: 1.1 !important;
}
#calculatorModal .sr-only{
  position:absolute !important;
  width:1px !important;
  height:1px !important;
  padding:0 !important;
  margin:-1px !important;
  overflow:hidden !important;
  clip:rect(0,0,0,0) !important;
  border:0 !important;
}

/* Mobile: sobe mais e reduz mais */
@media (max-width: 480px){
  #calculatorModal.calc-overlay{
    padding-top: 2px !important;
  }
  #calculatorModal .calc-modal{
    transform: translateY(-34px) !important;
    max-height: 58vh !important;
  }
  #calculatorModal .calculator-display{
    font-size: 0.95rem !important;
  }
  #calculatorModal button{
    padding: 6px 5px !important;
    font-size: 0.74rem !important;
  }
  #calculatorModal .bottom-actions button{
    padding: 7px 5px !important;
    font-size: 0.72rem !important;
  }
}
</style>

</head>
 <body><!-- PÁGINA DE LOGIN -->
  <div id="loginPage" class="login-page">
   <div class="login-container"><!-- Logo Centralizada -->
    <div class="login-logo-container">
     <div class="login-logo-3d"><!-- Face Frontal - Gráfico de Barras -->
      <div class="chart-face chart-front">
       <svg class="chart-icon" viewbox="0 0 24 24"><rect x="3" y="12" width="3" height="9" rx="1" /> <rect x="7" y="8" width="3" height="13" rx="1" /> <rect x="11" y="4" width="3" height="17" rx="1" /> <rect x="15" y="10" width="3" height="11" rx="1" /> <rect x="19" y="6" width="3" height="15" rx="1" />
       </svg>
      </div><!-- Face Traseira - Gráfico de Pizza -->
      <div class="chart-face chart-back">
       <svg class="chart-icon" viewbox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="none" stroke="white" stroke-width="2" /> <path d="M12 2 A10 10 0 0 1 20.5 8.5 L12 12 Z" fill="rgba(255,255,255,0.8)" /> <path d="M20.5 8.5 A10 10 0 0 1 15.5 21.5 L12 12 Z" fill="rgba(255,255,255,0.6)" /> <path d="M15.5 21.5 A10 10 0 0 1 3.5 15.5 L12 12 Z" fill="rgba(255,255,255,0.4)" /> <path d="M3.5 15.5 A10 10 0 0 1 12 2 L12 12 Z" fill="rgba(255,255,255,0.2)" />
       </svg>
      </div><!-- Face Direita - Gráfico de Linha -->
      <div class="chart-face chart-right">
       <svg class="chart-icon" viewbox="0 0 24 24"><polyline points="3,18 7,12 11,14 15,8 19,10 21,6" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" /> <circle cx="3" cy="18" r="2" fill="white" /> <circle cx="7" cy="12" r="2" fill="white" /> <circle cx="11" cy="14" r="2" fill="white" /> <circle cx="15" cy="8" r="2" fill="white" /> <circle cx="19" cy="10" r="2" fill="white" /> <circle cx="21" cy="6" r="2" fill="white" />
       </svg>
      </div><!-- Face Esquerda - Gráfico de Área -->
      <div class="chart-face chart-left">
       <svg class="chart-icon" viewbox="0 0 24 24"><path d="M3 20 L7 14 L11 16 L15 10 L19 12 L21 8 L21 20 Z" fill="rgba(255,255,255,0.7)" /> <polyline points="3,20 7,14 11,16 15,10 19,12 21,8" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" />
       </svg>
      </div><!-- Face Superior - Símbolo de Dinheiro -->
      <div class="chart-face chart-top">
       <svg class="chart-icon" viewbox="0 0 24 24"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" stroke="white" stroke-width="2.5" fill="none" stroke-linecap="round" />
       </svg>
      </div><!-- Face Inferior - Calculadora -->
      <div class="chart-face chart-bottom">
       <svg class="chart-icon" viewbox="0 0 24 24"><rect x="4" y="2" width="16" height="20" rx="2" fill="none" stroke="white" stroke-width="2" /> <rect x="6" y="4" width="12" height="4" rx="1" fill="white" /> <rect x="6" y="10" width="2" height="2" rx="0.5" fill="white" /> <rect x="10" y="10" width="2" height="2" rx="0.5" fill="white" /> <rect x="14" y="10" width="2" height="2" rx="0.5" fill="white" /> <rect x="6" y="14" width="2" height="2" rx="0.5" fill="white" /> <rect x="10" y="14" width="2" height="2" rx="0.5" fill="white" /> <rect x="14" y="14" width="2" height="6" rx="0.5" fill="white" /> <rect x="6" y="18" width="6" height="2" rx="0.5" fill="white" />
       </svg>
      </div>
     </div>
    </div><!-- Título 3D -->
    <div class="login-title">
     <h1 class="title-3d"><span class="title-line">PLANOS &amp;</span> <span class="title-line">PARCELAMENTOS</span> <span class="title-line subtitle">ZENIR</span></h1>
    </div><!-- Mensagem Motivacional -->
    <div class="motivational-message">
     <p id="mensagemDoDiaLogin">💪 <strong>Transforme cada venda em sucesso!</strong></p>
    </div><!-- Formulário de Login -->
    <div class="login-form">
     <div class="input-group">
      <div style="display: flex; align-items: center; gap: 10px; justify-content: flex-start;"><label for="nomeVendedor" style="margin: 0;">Nome do Colaborador:</label>
       <div class="boneco-3d">
        <div class="boneco-container"><!-- Cabeça -->
         <div class="boneco-cabeca"></div><!-- Corpo -->
         <div class="boneco-corpo"></div><!-- Braço esquerdo (parado) -->
         <div class="boneco-braco-esquerdo"></div><!-- Braço direito (acenando) -->
         <div class="boneco-braco-direito"></div><!-- Mão acenando -->
         <div class="boneco-mao-acenando">
          👋
         </div><!-- Pernas -->
         <div class="boneco-perna-esquerda"></div>
         <div class="boneco-perna-direita"></div>
        </div>
       </div>
      </div><input type="text" id="nomeVendedor" name="fs_nome_vendedor" autocomplete="off" spellcheck="false" autocapitalize="words" placeholder="Digite seu nome para continuar..." maxlength="50">
     </div>
     <div class="input-group" id="senhaGroup" style="display: none;"><label for="senhaDispositivo">🔐 Senha do Sistema:</label> <input type="password" id="senhaDispositivo" placeholder="Digite a senha para autorizar este dispositivo..." maxlength="10">
      <div style="font-size: 0.8rem; color: #666; margin-top: 5px; text-align: center;">
       🔒 Esta senha será solicitada apenas uma vez por dispositivo
      </div>
     </div><button id="btnEntrar" class="login-btn" disabled onclick="entrarNoSistema()"> 🔓 ENTRAR NO SISTEMA </button>
    </div><!-- Rodapé do Login -->
    <div class="login-footer">
     <p>Desenvolvido por <strong>@FildoSobral</strong> 🚀</p>
    </div>
   </div>
  </div><!-- TELA DE STANDBY (OCULTA INICIALMENTE) -->
  <div id="standbyScreen" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); z-index: 9999; overflow: hidden;"><!-- Partículas de fundo -->
   <div id="standbyParticles" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;"></div><!-- Conteúdo central -->
   <div style="position: relative; z-index: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; padding: 20px;"><!-- Ícone animado -->
    <div style="font-size: 5rem; margin-bottom: 30px; animation: standbyIconFloat 3s ease-in-out infinite; filter: drop-shadow(0 0 20px rgba(255,255,255,0.5));">
     💫
    </div><!-- Mensagem do Dia -->
    <div id="standbyMessage" style="
                max-width: 800px;
                text-align: center;
                color: white;
                font-size: 1.8rem;
                font-weight: 700;
                line-height: 1.6;
                text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
                padding: 40px;
                background: rgba(255,255,255,0.05);
                border-radius: 20px;
                backdrop-filter: blur(10px);
                border: 2px solid rgba(255,255,255,0.1);
                animation: standbyMessagePulse 4s ease-in-out infinite;
            "></div><!-- Instrução -->
    <div style="
                margin-top: 40px;
                color: rgba(255,255,255,0.7);
                font-size: 1.1rem;
                font-weight: 600;
                animation: standbyBlink 2s ease-in-out infinite;
            ">
     Toque na tela ou pressione qualquer tecla para continuar...
    </div>
   </div>
  </div><!-- APLICAÇÃO PRINCIPAL (OCULTA INICIALMENTE) -->
  <div id="mainApp" class="dashboard" style="display: none;">
   <div class="header"><!-- Seção Superior: Logo + Título -->
    <div style="display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 10px; position: relative;"><!-- Logo Gráfico 3D -->
     <div class="logo-3d">
      <div class="logo-container"><!-- Face Frontal - Gráfico de Barras -->
       <div class="chart-face chart-front">
        <svg class="chart-icon" viewbox="0 0 24 24"><rect x="3" y="12" width="3" height="9" rx="1" /> <rect x="7" y="8" width="3" height="13" rx="1" /> <rect x="11" y="4" width="3" height="17" rx="1" /> <rect x="15" y="10" width="3" height="11" rx="1" /> <rect x="19" y="6" width="3" height="15" rx="1" />
        </svg>
       </div><!-- Face Traseira - Gráfico de Pizza -->
       <div class="chart-face chart-back">
        <svg class="chart-icon" viewbox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="none" stroke="white" stroke-width="2" /> <path d="M12 2 A10 10 0 0 1 20.5 8.5 L12 12 Z" fill="rgba(255,255,255,0.8)" /> <path d="M20.5 8.5 A10 10 0 0 1 15.5 21.5 L12 12 Z" fill="rgba(255,255,255,0.6)" /> <path d="M15.5 21.5 A10 10 0 0 1 3.5 15.5 L12 12 Z" fill="rgba(255,255,255,0.4)" /> <path d="M3.5 15.5 A10 10 0 0 1 12 2 L12 12 Z" fill="rgba(255,255,255,0.2)" />
        </svg>
       </div><!-- Face Direita - Gráfico de Linha -->
       <div class="chart-face chart-right">
        <svg class="chart-icon" viewbox="0 0 24 24"><polyline points="3,18 7,12 11,14 15,8 19,10 21,6" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" /> <circle cx="3" cy="18" r="2" fill="white" /> <circle cx="7" cy="12" r="2" fill="white" /> <circle cx="11" cy="14" r="2" fill="white" /> <circle cx="15" cy="8" r="2" fill="white" /> <circle cx="19" cy="10" r="2" fill="white" /> <circle cx="21" cy="6" r="2" fill="white" />
        </svg>
       </div><!-- Face Esquerda - Gráfico de Área -->
       <div class="chart-face chart-left">
        <svg class="chart-icon" viewbox="0 0 24 24"><path d="M3 20 L7 14 L11 16 L15 10 L19 12 L21 8 L21 20 Z" fill="rgba(255,255,255,0.7)" /> <polyline points="3,20 7,14 11,16 15,10 19,12 21,8" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" />
        </svg>
       </div><!-- Face Superior - Símbolo de Dinheiro -->
       <div class="chart-face chart-top">
        <svg class="chart-icon" viewbox="0 0 24 24"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" stroke="white" stroke-width="2.5" fill="none" stroke-linecap="round" />
        </svg>
       </div><!-- Face Inferior - Calculadora -->
       <div class="chart-face chart-bottom">
        <svg class="chart-icon" viewbox="0 0 24 24"><rect x="4" y="2" width="16" height="20" rx="2" fill="none" stroke="white" stroke-width="2" /> <rect x="6" y="4" width="12" height="4" rx="1" fill="white" /> <rect x="6" y="10" width="2" height="2" rx="0.5" fill="white" /> <rect x="10" y="10" width="2" height="2" rx="0.5" fill="white" /> <rect x="14" y="10" width="2" height="2" rx="0.5" fill="white" /> <rect x="6" y="14" width="2" height="2" rx="0.5" fill="white" /> <rect x="10" y="14" width="2" height="2" rx="0.5" fill="white" /> <rect x="14" y="14" width="2" height="6" rx="0.5" fill="white" /> <rect x="6" y="18" width="6" height="2" rx="0.5" fill="white" />
        </svg>
       </div>
      </div>
     </div><!-- Conteúdo Central -->
     <div class="header-content"><strong id="headerTitle">SIMULADOR DE PLANOS ZENIR</strong>
      <div id="welcomeMessage" class="welcome-message"></div>
     </div><!-- Menu de três pontos na lateral direita -->
     <div class="menu-container" style="position: absolute; top: 0; right: 0;"><button class="menu-btn" onclick="toggleMenu()">⋮</button>
      <div id="menuDropdown" class="menu-dropdown">
       <div class="menu-item" onclick="mostrarTaxasFatores(); toggleMenu();">
        📊 Taxa / Fatores
       </div>
       <div class="menu-item" onclick="mostrarCalculadora(); toggleMenu();">
        🧮 Calculadora
       </div>
       <div class="menu-item" onclick="limparTodosValores(); toggleMenu();">
        🧹 Limpar Tudo
       </div>
       <div class="menu-item" onclick="mostrarAjuda(); toggleMenu();">
        💫 Mensagem do Dia
       </div>
       <div class="menu-item" onclick="ativarStandby(); toggleMenu();">
        🌙 Modo Standby
       </div>
       <div class="menu-item" onclick="exportarDados(); toggleMenu();">
        📊 Exportar Dados
       </div>
       <div class="menu-item" onclick="sairDoSistema(); toggleMenu();" style="border-top: 2px solid #dc3545;">
        🚪 Sair
       </div>
      </div>
     </div>
    </div><!-- Botões Principais de Alternância -->
    <div style="display: flex; justify-content: center; gap: 20px; width: 100%;"><button id="btnTabelaPreco" class="main-toggle-btn active" onclick="alternarTabelaPrincipal('tabela')"> 💻 PREÇO DE TABELA </button> <button id="btnPromocao" class="main-toggle-btn" onclick="alternarTabelaPrincipal('promocao')"> 💸 PROMOÇÃO </button>
    </div>
   </div><!-- ABAS PARA PREÇO DE TABELA -->
   <div id="nav-tabs-tabela" class="nav-tabs"><button class="tab-btn active" onclick="switchTab('padrao')"> 📄 CARNÊ </button> <button class="tab-btn" onclick="switchTab('cartaoExclusivo')"> 💳 CARTÃO </button> <button class="tab-btn" onclick="switchTab('gerente')"> 👨‍💼 PARCELAMENTO EXCLUSIVO </button> <button class="tab-btn" onclick="switchTab('gerenteExclusivo')"> 🔥 GERENTE EXCLUSIVO </button>
   </div><!-- ABAS PARA PROMOÇÃO -->
   <div id="nav-tabs-promocao" class="nav-tabs" style="display: none;"><button class="tab-btn active" onclick="switchTab('promocaoCarne')"> 📄 CARNÊ </button> <button class="tab-btn" onclick="switchTab('promocaoCartao')"> 💳 CARTÃO </button>
   </div>
   <div class="content-area"><!-- SEÇÃO DE INPUTS -->
    <div class="inputs-section">
     <div class="card">
      <div class="card-title" id="mainSectionTitle" style="display: flex; align-items: center; justify-content: space-between; position: relative;">
       VALORES PRINCIPAIS <button id="btnLimparValores" onclick="limparTodosValores()" style="
                            background: #dc3545;
                            color: white;
                            border: none;
                            border-radius: 3px;
                            width: 20px;
                            height: 20px;
                            font-size: 12px;
                            font-weight: bold;
                            cursor: pointer;
                            display: flex !important;
                            align-items: center;
                            justify-content: center;
                            transition: all 0.2s ease;
                            box-shadow: 0 2px 4px rgba(220, 53, 69, 0.3);
                            flex-shrink: 0;
                            position: absolute;
                            right: 0;
                            top: 50%;
                            transform: translateY(-50%);
                        " onmouseover="this.style.background='#c82333'; this.style.transform='translateY(-50%) scale(1.1)'" onmouseout="this.style.background='#dc3545'; this.style.transform='translateY(-50%) scale(1)'">×</button>
      </div>
      <div class="row-centralizado"><label>R$ Preço:</label> <input id="precoProduto" type="text">
       <div style="font-size: 0.55rem; color: #888; margin-top: 2px; text-align: center; font-weight: 400; line-height: 1.1;">
        📋 REGRA DE PARCELAMENTOS À VISTA<br>
         📄 CARNÊ 2X &nbsp;&nbsp; 💳 CARTÃO 3X
       </div>
      </div>
      <div class="row-centralizado"><label>R$ Entrada:</label> <input id="entrada" type="text">
      </div>
      <div class="row"><label>+36:</label> <input id="garantia36" type="text">
      </div>
      <div class="row"><label>+24:</label> <input id="garantia24" type="text">
      </div>
      <div class="row"><label>+12:</label> <input id="garantia12" type="text">
      </div>
     </div><!-- ÁREA DO GERENTE EXCLUSIVO -->
     <div class="card" id="gerenteExclusivoCard" style="display: none;">
      <div class="card-title">
       GERENTE EXCLUSIVO
      </div>
      <div class="row"><label>% Gerente:</label> <input id="percentGerenteExclusivo" type="text">
      </div><!-- ALERTA DE AUTORIZAÇÃO EXCLUSIVO -->
      <div id="alertaAutorizacaoExclusivo" class="alerta-autorizacao"></div><!-- VALOR COM DESCONTO EXCLUSIVO -->
      <div id="valorGerenteExclusivo" class="valor-gerente"><label>PREÇO TOTALMENTE À VISTA:</label> <input id="precoGerenteExclusivo" type="text" readonly>
      </div>
     </div>
    </div><!-- SEÇÃO DE RESULTADOS -->
    <div class="results-section"><!-- TABELA PADRÃO -->
     <div id="padrao-content" class="tab-content active">
      <h3 style="margin-top: 0; color: #333;">TABELA DE PARCELAMENTO CARNÊ</h3>
      <table>
       <thead>
        <tr>
         <th>PRAZO</th>
         <th>CARNÊ</th>
         <th>PRESTA MISTA</th>
         <th>(+) 36m</th>
         <th>(+) 24m</th>
         <th>(+) 12m</th>
        </tr>
       </thead>
       <tbody id="tabelaPadrao"></tbody>
      </table>
     </div><!-- CARTÃO EXCLUSIVO -->
     <div id="cartaoExclusivo-content" class="tab-content">
      <h3 style="margin-top: 0; color: #333;">TABELA DE PARCELAMENTO CARTÃO</h3>
      <table>
       <thead>
        <tr>
         <th>PRAZO</th>
         <th>CARTÃO</th>
         <th>(+) 36m</th>
         <th>(+) 24m</th>
         <th>(+) 12m</th>
        </tr>
       </thead>
       <tbody id="tabelaCartaoExclusivo"></tbody>
      </table>
     </div><!-- PARCELAMENTO EXCLUSIVO -->
     <div id="gerente-content" class="tab-content">
      <h3 style="margin-top: 0; color: #333;">TABELA DE PARCELAMENTO EXCLUSIVO</h3><!-- SUBTÓPICO CARNÊ -->
      <div style="margin-bottom: 30px;">
       <h4 style="background: linear-gradient(135deg, #ff6b35, #f7931e); color: white; padding: 10px; border-radius: 6px; margin: 15px 0 10px 0; text-align: center; font-size: 0.9rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px;">📄 MODALIDADE CARNÊ</h4>
       <table>
        <thead>
         <tr>
          <th>PRAZO</th>
          <th>CARNÊ NORMAL</th>
          <th>CARNÊ +12 (GARANTIA)</th>
         </tr>
        </thead>
        <tbody id="tabelaGerenteCarne"></tbody>
       </table>
      </div><!-- SUBTÓPICO CARTÃO -->
      <div>
       <h4 style="background: linear-gradient(135deg, #4a90e2, #357abd); color: white; padding: 10px; border-radius: 6px; margin: 15px 0 10px 0; text-align: center; font-size: 0.9rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px;">💳 MODALIDADE CARTÃO</h4>
       <table>
        <thead>
         <tr>
          <th>PRAZO</th>
          <th>CARTÃO NORMAL</th>
          <th>CARTÃO COM BENEFICIOS ZENIR</th>
         </tr>
        </thead>
        <tbody id="tabelaGerenteCartao"></tbody>
       </table>
      </div>
     </div><!-- GERENTE EXCLUSIVO -->
     <div id="gerenteExclusivo-content" class="tab-content">
      <h3 style="margin-top: 0; color: #333;">TABELA GERENTE EXCLUSIVO</h3><!-- SUBTÓPICO CARNÊ -->
      <div style="margin-bottom: 30px;">
       <h4 style="background: linear-gradient(135deg, #ff6b35, #f7931e); color: white; padding: 10px; border-radius: 6px; margin: 15px 0 10px 0; text-align: center; font-size: 0.9rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px;">📄 MODALIDADE CARNÊ</h4>
       <table>
        <thead>
         <tr>
          <th>PRAZO</th>
          <th>CARNÊ NORMAL</th>
          <th>CARNÊ COM BENEFICIOS (PRESTA MISTA)</th>
          <th>CARNÊ COM BENEFICIOS (G.E)</th>
         </tr>
        </thead>
        <tbody id="tabelaGerenteExclusivoCarne"></tbody>
       </table>
      </div><!-- SUBTÓPICO CARTÃO -->
      <div>
       <h4 style="background: linear-gradient(135deg, #4a90e2, #357abd); color: white; padding: 10px; border-radius: 6px; margin: 15px 0 10px 0; text-align: center; font-size: 0.9rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px;">💳 MODALIDADE CARTÃO</h4>
       <table>
        <thead>
         <tr>
          <th>PRAZO</th>
          <th>CARTÃO NORMAL</th>
          <th>CARTÃO COM BENEFICIOS (+12)</th>
         </tr>
        </thead>
        <tbody id="tabelaGerenteExclusivoCartao"></tbody>
       </table>
      </div>
     </div><!-- PROMOÇÃO CARNÊ -->
     <div id="promocaoCarne-content" class="tab-content">
      <h3 style="margin-top: 0; color: #333;">TABELA PROMOÇÃO - CARNÊ</h3>
      <table>
       <thead>
        <tr>
         <th>PRAZO</th>
         <th>CARNÊ</th>
         <th>PRESTA MISTA</th>
         <th>(+) 36m</th>
         <th>(+) 24m</th>
         <th>(+) 12m</th>
        </tr>
       </thead>
       <tbody id="tabelaPromocaoCarne"></tbody>
      </table>
     </div><!-- PROMOÇÃO CARTÃO -->
     <div id="promocaoCartao-content" class="tab-content">
      <h3 style="margin-top: 0; color: #333;">TABELA PROMOÇÃO - CARTÃO</h3>
      <table>
       <thead>
        <tr>
         <th>PRAZO</th>
         <th>CARTÃO</th>
         <th>(+) 36m</th>
         <th>(+) 24m</th>
         <th>(+) 12m</th>
        </tr>
       </thead>
       <tbody id="tabelaPromocaoCartao"></tbody>
      </table>
     </div>
    </div>
   </div>
  </div>
  <div class="footer">
   Desenvolvido por <span>@FildoSobral 🚀</span>
  </div>
  <script>
        // Default configuration
        const defaultConfig = {
            main_section_title: "VALORES PRINCIPAIS"
        };

        // Initialize Element SDK
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange: async (config) => {
                    document.getElementById('mainSectionTitle').textContent = config.main_section_title || defaultConfig.main_section_title;
                },
                mapToCapabilities: (config) => ({
                    recolorables: [],
                    borderables: [],
                    fontEditable: undefined,
                    fontSizeable: undefined
                }),
                mapToEditPanelValues: (config) => new Map([
                    ["main_section_title", config.main_section_title || defaultConfig.main_section_title]
                ])
            });
        }

        // Variáveis para controlar as abas
        let currentTab = null; // nenhum modo selecionado inicialmente
        let currentMainTab = 'tabela'; // 'tabela' ou 'promocao'

        // Reseta seleção de modalidade (Carnê/Cartão/Exclusivos) para exigir clique do usuário
        function resetarSelecaoModalidade() {
            currentTab = null;

            // Remove destaque dos botões de abas (tabela e promoção)
            document
              .querySelectorAll('#nav-tabs-tabela .tab-btn, #nav-tabs-promocao .tab-btn')
              .forEach(btn => btn.classList.remove('active'));

            // Esconde todos os conteúdos de resultado
            document
              .querySelectorAll('.tab-content')
              .forEach(content => content.classList.remove('active'));

            // Garante que o card de Gerente Exclusivo fique oculto quando nenhuma modalidade está selecionada
            const gerenteExclusivoCard = document.getElementById('gerenteExclusivoCard');
            if (gerenteExclusivoCard) gerenteExclusivoCard.style.display = 'none';

        }
        // Armazenamento separado de valores para cada seção
        let valoresTabela = {
            precoProduto: '',
            entrada: '',
            garantia36: '',
            garantia24: '',
            garantia12: '',
            percentGerenteExclusivo: ''
        };

        let valoresPromocao = {
            precoProduto: '',
            entrada: '',
            garantia36: '',
            garantia24: '',
            garantia12: '',
            percentGerenteExclusivo: ''
        };

        // Variáveis globais
        let nomeVendedor = '';
        let dispositivoAutorizado = false;
        const SENHA_SISTEMA = '@fildO1060'; // Senha para desbloquear o dispositivo
        const CHAVE_DISPOSITIVO = 'fs_dispositivo_autorizado';
        const CHAVE_NOME_AUTORIZADO = 'fs_nome_autorizado';
        
        // Variáveis do Standby
        let standbyTimer = null;
        const STANDBY_TIMEOUT = 20 * 60 * 1000; // 20 minutos em milissegundos
        let emStandby = false;

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            verificarDispositivoAutorizado();
            configurarLoginEventos();
            configurarFormatacaoMoeda();
            configurarEventos();
            calcularTudo();
            atualizarMensagemLogin();
            inicializarStandby();
        });

        // ===== FUNÇÕES DO MODO STANDBY =====
        
        // Inicializa o sistema de standby
        function inicializarStandby() {
            // Eventos para resetar o timer de inatividade
            const eventos = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart', 'click'];
            
            eventos.forEach(evento => {
                document.addEventListener(evento, function() {
                    if (!emStandby) {
                        resetarTimerStandby();
                    }
                });
            });
            
            // Inicia o timer
            resetarTimerStandby();
            
            // Configura eventos para sair do standby
            const standbyScreen = document.getElementById('standbyScreen');
            if (standbyScreen) {
                standbyScreen.addEventListener('click', sairDoStandby);
                standbyScreen.addEventListener('touchstart', sairDoStandby);
                document.addEventListener('keydown', function(e) {
                    if (emStandby) {
                        sairDoStandby();
                    }
                });
            }
        }
        
        // Reseta o timer de inatividade
        function resetarTimerStandby() {
            if (standbyTimer) {
                clearTimeout(standbyTimer);
            }
            
            // Só inicia o timer se estiver na aplicação principal
            const mainApp = document.getElementById('mainApp');
            if (mainApp && mainApp.style.display !== 'none') {
                standbyTimer = setTimeout(ativarStandby, STANDBY_TIMEOUT);
            }
        }
        
        // Ativa o modo standby
        function ativarStandby() {
            emStandby = true;
            
            // Esconde a aplicação principal
            const mainApp = document.getElementById('mainApp');
            if (mainApp) {
                mainApp.style.display = 'none';
            }
            
            // Mostra a tela de standby
            const standbyScreen = document.getElementById('standbyScreen');
            if (standbyScreen) {
                standbyScreen.style.display = 'block';
                
                // Atualiza a mensagem do dia
                const standbyMessage = document.getElementById('standbyMessage');
                if (standbyMessage) {
                    const mensagem = obterMensagemDoDia();
                    standbyMessage.textContent = mensagem;
                    
                    // Efeito de digitação
                    aplicarEfeitoDigitacao(standbyMessage, mensagem);
                }
                
                // Cria partículas animadas
                criarParticulasStandby();
            }
            
            console.log('Modo Standby ativado');
        }
        
        // Sai do modo standby
        function sairDoStandby() {
            if (!emStandby) return;
            
            // Mostra modal de login rápido
            mostrarLoginRapido();
        }
        
        // Mostra modal de login rápido para sair do standby
        function mostrarLoginRapido() {
            const loginHTML = `
                <div id="loginRapidoModal" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 10000; display: flex; align-items: center; justify-content: center;" onclick="confirmarSaidaStandby()">
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px; border-radius: 20px; max-width: 450px; width: 90%; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.3);" onclick="confirmarSaidaStandby()">
                        <div style="font-size: 3rem; margin-bottom: 20px; animation: standbyIconFloat 2s ease-in-out infinite;">
                            👋
                        </div>
                        
                        <h2 style="color: white; margin: 0 0 15px 0; font-size: 1.5rem; font-weight: 800; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">
                            BEM-VINDO DE VOLTA!
                        </h2>
                        
                        <p style="color: rgba(255,255,255,0.9); margin-bottom: 25px; font-size: 1rem;">
                            Clique em qualquer lugar ou pressione ENTER
                        </p>
                        
                        <button 
                            id="btnContinuarStandby"
                            style="
                                width: 100%;
                                padding: 15px 30px;
                                border: none;
                                border-radius: 12px;
                                font-size: 1rem;
                                font-weight: 800;
                                text-transform: uppercase;
                                cursor: pointer;
                                background: linear-gradient(135deg, #28a745, #20c997);
                                color: white;
                                box-shadow: 0 8px 20px rgba(40, 167, 69, 0.4);
                                transition: all 0.3s ease;
                            "
                            onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 12px 25px rgba(40, 167, 69, 0.6)';"
                            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 20px rgba(40, 167, 69, 0.4)';"
                        >
                            ✨ CONTINUAR ✨
                        </button>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', loginHTML);
            
            // Adiciona evento de teclado para ENTER
            const handleKeyPress = (e) => {
                if (e.key === 'Enter') {
                    confirmarSaidaStandby();
                    document.removeEventListener('keypress', handleKeyPress);
                }
            };
            document.addEventListener('keypress', handleKeyPress);
            
            // Foca no botão para permitir ativação por Enter
            setTimeout(() => {
                const btn = document.getElementById('btnContinuarStandby');
                if (btn) btn.focus();
            }, 100);
        }
        
        // Confirma a saída do standby
        function confirmarSaidaStandby() {
            // Remove o modal
            const modal = document.getElementById('loginRapidoModal');
            if (modal) modal.remove();
            
            // Esconde a tela de standby
            const standbyScreen = document.getElementById('standbyScreen');
            if (standbyScreen) {
                standbyScreen.style.display = 'none';
            }
            
            // Mostra a aplicação principal
            const mainApp = document.getElementById('mainApp');
            if (mainApp) {
                mainApp.style.display = 'block';
                
                
                // Exige seleção da modalidade (Carnê/Cartão/Exclusivo/Gerente) antes de mostrar valores
                try { resetarSelecaoModalidade(); } catch(e) {}
// Atualiza mensagem de boas-vindas
                const welcomeMessage = document.getElementById('welcomeMessage');
                if (welcomeMessage) {
                    const mensagemMotivacional = obterMensagemDoDia();
                    welcomeMessage.innerHTML = `��� <span style="color: #ffc107; font-weight: 800; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">Seja bem-vindo, ${nomeVendedor}!</span> - ${mensagemMotivacional}`;
                }
            }
            
            // Reseta variáveis
            emStandby = false;
            resetarTimerStandby();
            
            console.log('Saiu do Modo Standby');
        }
        
        // Cria partículas animadas no standby
        function criarParticulasStandby() {
            const container = document.getElementById('standbyParticles');
            if (!container) return;
            
            // Limpa partículas anteriores
            container.innerHTML = '';
            
            // Cria 20 partículas
            for (let i = 0; i < 20; i++) {
                const particula = document.createElement('div');
                particula.style.cssText = `
                    position: absolute;
                    width: ${Math.random() * 4 + 2}px;
                    height: ${Math.random() * 4 + 2}px;
                    background: rgba(255, 255, 255, ${Math.random() * 0.5 + 0.3});
                    border-radius: 50%;
                    left: ${Math.random() * 100}%;
                    animation: standbyParticleFloat ${Math.random() * 10 + 10}s linear infinite;
                    animation-delay: ${Math.random() * 5}s;
                `;
                container.appendChild(particula);
            }
        }
        
        // Aplica efeito de digitação na mensagem
        function aplicarEfeitoDigitacao(elemento, texto) {
            elemento.textContent = '';
            let index = 0;
            
            const intervalo = setInterval(() => {
                if (index < texto.length) {
                    elemento.textContent += texto.charAt(index);
                    index++;
                } else {
                    clearInterval(intervalo);
                }
            }, 50);
        }

        // Função para verificar se o dispositivo já está autorizado
        function verificarDispositivoAutorizado() {
            const autorizado = localStorage.getItem(CHAVE_DISPOSITIVO);
            const nomeAutorizado = localStorage.getItem(CHAVE_NOME_AUTORIZADO);
            
            if (autorizado === 'true' && nomeAutorizado) {
                dispositivoAutorizado = true;
                // Pré-preenche o nome se o dispositivo já está autorizado
                const inputNome = document.getElementById('nomeVendedor');
                if (inputNome) {
                    inputNome.value = nomeAutorizado;
                    inputNome.placeholder = `Bem-vindo de volta, ${nomeAutorizado}! 🎯`;
                }
                console.log('Dispositivo já autorizado para:', nomeAutorizado);
            }
        }

        // Configuração dos eventos de login
        function configurarLoginEventos() {
            const inputNome = document.getElementById('nomeVendedor');
            const inputSenha = document.getElementById('senhaDispositivo');
            const btnEntrar = document.getElementById('btnEntrar');
            const senhaGroup = document.getElementById('senhaGroup');
            
            if (inputNome && btnEntrar) {
                // Evento de input para habilitar/desabilitar botão
                inputNome.addEventListener('input', function() {
                    const nome = this.value.trim();
                    const nomeAutorizado = localStorage.getItem(CHAVE_NOME_AUTORIZADO);
                    
                    // Se o dispositivo está autorizado e o nome é o mesmo
                    if (dispositivoAutorizado && nome === nomeAutorizado) {
                        btnEntrar.disabled = false;
                        if (senhaGroup) senhaGroup.style.display = 'none';
                        btnEntrar.textContent = '🚀 ENTRAR NO SISTEMA';
                    } 
                    // Se o dispositivo não está autorizado ou nome diferente
                    else if (nome.length >= 2) {
                        if (!dispositivoAutorizado || nome !== nomeAutorizado) {
                            if (senhaGroup) senhaGroup.style.display = 'block';
                            btnEntrar.textContent = '🔐 AUTORIZAR DISPOSITIVO';
                            validarFormularioCompleto();
                        }
                    } 
                    // Nome muito curto
                    else {
                        btnEntrar.disabled = true;
                        if (senhaGroup) senhaGroup.style.display = 'none';
                        btnEntrar.textContent = '🚀 ENTRAR NO SISTEMA';
                    }
                    
                    // Efeito visual do botão
                    if (!btnEntrar.disabled) {
                        btnEntrar.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
                        btnEntrar.style.transform = 'translateY(-2px)';
                    } else {
                        btnEntrar.style.background = '#ccc';
                        btnEntrar.style.transform = 'none';
                    }
                });
                
                // Evento Enter no campo de nome
                inputNome.addEventListener('keypress', function(event) {
                    if (event.key === 'Enter') {
                        event.preventDefault();
                        if (!btnEntrar.disabled) {
                            entrarNoSistema();
                        }
                    }
                });
            }
            
            if (inputSenha) {
                // Evento de input na senha
                inputSenha.addEventListener('input', function() {
                    validarFormularioCompleto();
                });
                
                // Evento Enter no campo de senha
                inputSenha.addEventListener('keypress', function(event) {
                    if (event.key === 'Enter') {
                        event.preventDefault();
                        if (!btnEntrar.disabled) {
                            entrarNoSistema();
                        }
                    }
                });
            }
        }

        // Função para validar se o formulário está completo
        function validarFormularioCompleto() {
            const inputNome = document.getElementById('nomeVendedor');
            const inputSenha = document.getElementById('senhaDispositivo');
            const btnEntrar = document.getElementById('btnEntrar');
            const senhaGroup = document.getElementById('senhaGroup');
            
            const nome = inputNome.value.trim();
            const senha = inputSenha.value.trim();
            const nomeAutorizado = localStorage.getItem(CHAVE_NOME_AUTORIZADO);
            
            // Se dispositivo autorizado e nome igual
            if (dispositivoAutorizado && nome === nomeAutorizado) {
                btnEntrar.disabled = nome.length < 2;
            }
            // Se precisa de senha
            else if (senhaGroup.style.display === 'block') {
                btnEntrar.disabled = nome.length < 2 || senha.length === 0;
            }
            // Caso padrão
            else {
                btnEntrar.disabled = nome.length < 2;
            }
        }

        // Função para entrar no sistema
        function entrarNoSistema() {
            const inputNome = document.getElementById('nomeVendedor');
            const inputSenha = document.getElementById('senhaDispositivo');
            const senhaGroup = document.getElementById('senhaGroup');
            const nome = inputNome.value.trim();
            const senha = inputSenha.value.trim();
            const nomeAutorizado = localStorage.getItem(CHAVE_NOME_AUTORIZADO);
            
            if (nome.length < 2) {
                // Shake animation para erro
                inputNome.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => {
                    inputNome.style.animation = '';
                }, 500);
                return;
            }
            
            // Se o dispositivo já está autorizado e o nome é o mesmo
            if (dispositivoAutorizado && nome === nomeAutorizado) {
                nomeVendedor = nome;
                entrarNaAplicacao();
                return;
            }
            
            // Se precisa verificar a senha
            if (senhaGroup.style.display === 'block') {
                if (senha !== SENHA_SISTEMA) {
                    // Senha incorreta - shake animation
                    inputSenha.style.animation = 'shake 0.5s ease-in-out';
                    inputSenha.style.borderColor = '#dc3545';
                    inputSenha.value = '';
                    inputSenha.placeholder = '❌ Senha incorreta! Tente novamente...';
                    
                    setTimeout(() => {
                        inputSenha.style.animation = '';
                        inputSenha.style.borderColor = '#e1e5e9';
                        inputSenha.placeholder = 'Digite a senha para autorizar este dispositivo...';
                    }, 2000);
                    return;
                }
                
                // Senha correta - autoriza o dispositivo
                localStorage.setItem(CHAVE_DISPOSITIVO, 'true');
                localStorage.setItem(CHAVE_NOME_AUTORIZADO, nome);
                dispositivoAutorizado = true;
                
                // Feedback visual de sucesso
                inputSenha.style.borderColor = '#28a745';
                inputSenha.style.background = '#d4edda';
                
                // Mensagem de sucesso
                const successMsg = document.createElement('div');
                successMsg.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: #28a745;
                    color: white;
                    padding: 20px 30px;
                    border-radius: 12px;
                    font-weight: bold;
                    font-size: 1.1rem;
                    z-index: 20000;
                    box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
                    animation: fadeIn 0.3s ease-out;
                `;
                successMsg.textContent = '✅ Dispositivo autorizado com sucesso!';
                document.body.appendChild(successMsg);
                
                setTimeout(() => {
                    successMsg.remove();
                    nomeVendedor = nome;
                    entrarNaAplicacao();
                }, 1500);
                
                return;
            }
            
            // Caso padrão (não deveria chegar aqui)
            nomeVendedor = nome;
            entrarNaAplicacao();
        }

    // --- Ajustes de UX (FS) ---
    document.addEventListener('DOMContentLoaded', () => {
      const nome = document.getElementById('nomeVendedor');
      const senha = document.getElementById('senhaAcesso');
      const btn = document.getElementById('btnEntrar');

      // Evita vir preenchido por auto-completar do navegador
      // Mantém nome salvo ao recarregar (não desloga)
      try {
        const autorizado = localStorage.getItem('fs_dispositivo_autorizado');
        const nomeSalvo = localStorage.getItem('fs_nome_autorizado');
        if (nome && autorizado === 'true' && nomeSalvo) {
          nome.value = nomeSalvo;
        } else if (nome) {
          nome.value = '';
        }
      } catch (e) { if (nome) nome.value = ''; }

      // Enter no campo nome/senha aciona o botão Entrar
      const bindEnter = (el) => {
        if (!el) return;
        el.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') {
            e.preventDefault();
            if (btn) btn.click();
          }
        });
      };
      bindEnter(nome);
      bindEnter(senha);
    });


        // Função para entrar na aplicação
        function entrarNaAplicacao() {
            const loginPage = document.getElementById('loginPage');
            const mainApp = document.getElementById('mainApp');
            
            loginPage.classList.add('fade-out');
            
            setTimeout(() => {
                loginPage.style.display = 'none';
                mainApp.style.display = 'block';
                mainApp.classList.add('fade-in');
                
                // Atualiza mensagem de boas-vindas no cabeçalho
                const welcomeMessage = document.getElementById('welcomeMessage');
                if (welcomeMessage) {
                    const mensagemMotivacional = obterMensagemDoDia();
                    welcomeMessage.innerHTML = `🎯 <span style="color: #ffc107; font-weight: 800; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">Seja bem-vindo, ${nomeVendedor}!</span> - ${mensagemMotivacional}`;
                }
                
                // Foca no primeiro campo de entrada
                setTimeout(() => {
                    const precoProduto = document.getElementById('precoProduto');
                    if (precoProduto) {
                        precoProduto.focus();
                    }
                }, 300);
                
            }, 500);
        }

        // Configuração de formatação de moeda
        function configurarFormatacaoMoeda() {
            const campos = ['precoProduto', 'precoCartao', 'entrada', 'garantia36', 'garantia24', 'garantia12'];
            
            campos.forEach(id => {
                const campo = document.getElementById(id);
                if (campo) {
                    campo.addEventListener('input', formatarMoeda);
                }
            });



            const percentGerenteExclusivo = document.getElementById('percentGerenteExclusivo');
            if (percentGerenteExclusivo) {
                percentGerenteExclusivo.addEventListener('input', formatarPorcentagemExclusivo);
            }
        }

        // Configuração de eventos
        function configurarEventos() {
            const campos = ['precoProduto', 'precoCartao', 'entrada', 'garantia36', 'garantia24', 'garantia12', 'percentGerenteExclusivo'];
            
            campos.forEach(id => {
                const campo = document.getElementById(id);
                if (campo) {
                    campo.addEventListener('input', function() {
                        salvarValoresAtuais();
                        calcularTudo();
                    });
                    campo.addEventListener('change', function() {
                        salvarValoresAtuais();
                        calcularTudo();
                    });
                    
                    // Adiciona evento Enter para calcular
                    campo.addEventListener('keypress', function(event) {
                        if (event.key === 'Enter') {
                            event.preventDefault();
                            salvarValoresAtuais();
                            calcularTudo();
                        }
                    });
                }
            });
        }

        // Formatação de moeda
        function formatarMoeda(event) {
            let valor = event.target.value.replace(/\D/g, '');
            if (valor === '') {
                event.target.value = '';
                return;
            }
            
            // Converte para centavos e formata
            valor = (parseInt(valor) / 100).toFixed(2);
            valor = valor.replace('.', ',');
            valor = valor.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
            event.target.value = 'R$ ' + valor;
            
            // Dispara o cálculo automaticamente
            calcularTudo();
        }

        // Formatação de porcentagem
        function formatarPorcentagem(event) {
            let valor = event.target.value.replace(/\D/g, '');
            if (valor.length > 2) valor = valor.slice(0, 2);
            event.target.value = valor;
            
            // Controla exibição dos alertas e valor do gerente
            controlarAutorizacaoGerente(parseFloat(valor) || 0);
        }

        // Formatação de porcentagem exclusivo
        function formatarPorcentagemExclusivo(event) {
            let valor = event.target.value.replace(/\D/g, '');
            if (valor.length > 2) valor = valor.slice(0, 2);
            event.target.value = valor;
            
            // Controla exibição dos alertas e valor do gerente exclusivo
            controlarAutorizacaoGerenteExclusivo(parseFloat(valor) || 0);
        }

        // Controla autorização do gerente
        function controlarAutorizacaoGerente(percentual) {
            const alertaDiv = document.getElementById('alertaAutorizacao');
            const valorDiv = document.getElementById('valorGerente');
            
            if (percentual === 0 || isNaN(percentual)) {
                // Esconde tudo se não há percentual
                alertaDiv.style.display = 'none';
                valorDiv.style.display = 'none';
                return;
            }
            
            // Mostra o valor sempre em verde
            valorDiv.style.display = 'block';
            
            // Define cor e mensagem do alerta baseado no percentual
            alertaDiv.style.display = 'block';
            alertaDiv.className = 'alerta-autorizacao';
            
            if (percentual <= 3) {
                alertaDiv.classList.add('alerta-verde');
                alertaDiv.textContent = '✅ Autorizado Vendedor';
            } else if (percentual <= 5) {
                alertaDiv.classList.add('alerta-vermelho');
                alertaDiv.textContent = '⚠️ Atenção, Gerência';
            } else {
                alertaDiv.classList.add('alerta-preto');
                alertaDiv.textContent = '❌ Atenção, Desconto Negado';
            }
        }

        // Controla autorização do gerente exclusivo
        function controlarAutorizacaoGerenteExclusivo(percentual) {
            const alertaDiv = document.getElementById('alertaAutorizacaoExclusivo');
            const valorDiv = document.getElementById('valorGerenteExclusivo');
            
            if (percentual === 0 || isNaN(percentual)) {
                // Esconde tudo se não há percentual
                alertaDiv.style.display = 'none';
                valorDiv.style.display = 'none';
                return;
            }
            
            // Mostra o valor sempre em verde
            valorDiv.style.display = 'block';
            
            // Define cor e mensagem do alerta baseado no percentual
            alertaDiv.style.display = 'block';
            alertaDiv.className = 'alerta-autorizacao';
            
            if (percentual <= 3) {
                alertaDiv.classList.add('alerta-verde');
                alertaDiv.textContent = '✅ Autorizado Vendedor';
            } else if (percentual <= 5) {
                alertaDiv.classList.add('alerta-vermelho');
                alertaDiv.textContent = '⚠️ Atenção, Gerência';
            } else {
                alertaDiv.classList.add('alerta-preto');
                alertaDiv.textContent = '❌ Atenção, Desconto Negado';
            }
        }

        // Função para converter valor formatado para número
        function converterParaNumero(valorFormatado) {
            if (!valorFormatado) return 0;
            let valor = valorFormatado.replace(/R\$\s?/g, '').replace(/\./g, '').replace(',', '.');
            return parseFloat(valor) || 0;
        }

        // Função para formatar número para moeda brasileira
        function formatarParaMoeda(valor) {
            if (isNaN(valor) || valor === null || valor === undefined || valor === 0) return '';
            
            // Garante que o valor seja um número válido
            const numeroLimpo = parseFloat(valor);
            if (isNaN(numeroLimpo)) return '';
            
            // Formata com 2 casas decimais
            let valorFormatado = numeroLimpo.toFixed(2);
            
            // Substitui ponto por vírgula para decimais
            valorFormatado = valorFormatado.replace('.', ',');
            
            // Adiciona pontos para milhares
            valorFormatado = valorFormatado.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
            
            return 'R$ ' + valorFormatado;
        }

        // Função principal de cálculo
        function calcularTudo() {
            const precoProduto = converterParaNumero(document.getElementById('precoProduto')?.value || '');
            const entrada = converterParaNumero(document.getElementById('entrada')?.value || '');
            const garantia36 = converterParaNumero(document.getElementById('garantia36')?.value || '');
            const garantia24 = converterParaNumero(document.getElementById('garantia24')?.value || '');
            const garantia12 = converterParaNumero(document.getElementById('garantia12')?.value || '');

            const percentGerenteExclusivo = parseFloat(document.getElementById('percentGerenteExclusivo')?.value || '0') || 0;
            
            calcularTabelaPadrao(precoProduto, entrada, garantia36, garantia24, garantia12);
            calcularTabelaCartaoExclusivo(precoProduto, entrada, garantia36, garantia24, garantia12);
            calcularTabelaGerente(precoProduto, entrada, garantia36, garantia24, garantia12);
            calcularTabelaGerenteExclusivo(precoProduto, entrada, percentGerenteExclusivo, garantia36, garantia24, garantia12);
            
            // Calcula tabelas de promoção
            calcularTabelaPromocaoCarne(precoProduto, entrada, garantia36, garantia24, garantia12);
            calcularTabelaPromocaoCartao(precoProduto, entrada, garantia36, garantia24, garantia12);

            // Atualiza valor com desconto do gerente exclusivo
            if (percentGerenteExclusivo > 0) {
                const desconto = precoProduto * (percentGerenteExclusivo / 100);
                const precoComDesconto = precoProduto - desconto;
                document.getElementById('precoGerenteExclusivo').value = formatarParaMoeda(precoComDesconto);
            }
        }

        // Função para salvar valores atuais
        function salvarValoresAtuais() {
            const valores = currentMainTab === 'tabela' ? valoresTabela : valoresPromocao;
            
            valores.precoProduto = document.getElementById('precoProduto')?.value || '';
            valores.entrada = document.getElementById('entrada')?.value || '';
            valores.garantia36 = document.getElementById('garantia36')?.value || '';
            valores.garantia24 = document.getElementById('garantia24')?.value || '';
            valores.garantia12 = document.getElementById('garantia12')?.value || '';
            valores.percentGerenteExclusivo = document.getElementById('percentGerenteExclusivo')?.value || '';
        }

        // Função para carregar valores salvos
        function carregarValoresSalvos() {
            const valores = currentMainTab === 'tabela' ? valoresTabela : valoresPromocao;
            
            const precoProdutoEl = document.getElementById('precoProduto');
            const entradaEl = document.getElementById('entrada');
            const garantia36El = document.getElementById('garantia36');
            const garantia24El = document.getElementById('garantia24');
            const garantia12El = document.getElementById('garantia12');
            const percentGerenteExclusivoEl = document.getElementById('percentGerenteExclusivo');
            
            if (precoProdutoEl) precoProdutoEl.value = valores.precoProduto;
            if (entradaEl) entradaEl.value = valores.entrada;
            if (garantia36El) garantia36El.value = valores.garantia36;
            if (garantia24El) garantia24El.value = valores.garantia24;
            if (garantia12El) garantia12El.value = valores.garantia12;
            if (percentGerenteExclusivoEl) percentGerenteExclusivoEl.value = valores.percentGerenteExclusivo;
        }

        // Função para alternar entre PREÇO DE TABELA e PROMOÇ��O
        function alternarTabelaPrincipal(tipo) {
            // Se clicou na mesma, não faz nada
            if (tipo === currentMainTab) return;

            // 1) Salva os valores da seção atual (ANTES de trocar o currentMainTab)
            salvarValoresAtuais();

            // 2) Atualiza estado
            currentMainTab = tipo;

            // 3) Atualiza botões principais do cabeçalho
            const btnTabela = document.getElementById('btnTabelaPreco');
            const btnPromo  = document.getElementById('btnPromocao');
            if (btnTabela) btnTabela.classList.toggle('active', tipo === 'tabela');
            if (btnPromo)  btnPromo.classList.toggle('active', tipo === 'promocao');

            // 4) Mostra/esconde as abas correspondentes
            const navTabela = document.getElementById('nav-tabs-tabela');
            const navPromo  = document.getElementById('nav-tabs-promocao');
            if (navTabela) navTabela.style.display = (tipo === 'tabela') ? 'flex' : 'none';
            if (navPromo)  navPromo.style.display  = (tipo === 'promocao') ? 'flex' : 'none';

            // Em PROMOÇÃO, garante que recursos exclusivos não apareçam
            const gerenteExclusivoCard = document.getElementById('gerenteExclusivoCard');
            if (gerenteExclusivoCard) gerenteExclusivoCard.style.display = 'none';


            // 5) Carrega valores da nova seção (cada uma é independente)
            carregarValoresSalvos();

            // 6) Não deixa tabela aparecer sem escolher a modalidade
            resetarSelecaoModalidade();
        }

        // Cálculo da tabela padrão (carnê) - APENAS ATÉ 12 PARCELAS
        function calcularTabelaPadrao(preco, entrada, g36, g24, g12) {
            const tbody = document.getElementById('tabelaPadrao');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const prazos = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            const fatores = {
                1: 1.0690, 2: 0.5523, 3: 0.3804, 4: 0.2946, 5: 0.2432, 6: 0.2091,
                7: 0.1849, 8: 0.1668, 9: 0.1528, 10: 0.1417, 11: 0.1327, 12: 0.1252
            };
            
            prazos.forEach(prazo => {
                const fator = fatores[prazo] || 0;
                
                // NOVA REGRA CARNÊ: (Preço * fator * parcelas) - entrada / parcelas
                // Ex: 1.299,00 * 0.1252 = 162,63 * 12 = 1.951,56 - 200,00 = 1.751,56 / 12 = 145,96
                const valorParcela = preco * fator;
                const valorTotalParcelas = valorParcela * prazo;
                const valorComEntrada = valorTotalParcelas - entrada;
                const prestacao = valorComEntrada / prazo;
                
                // NOVA REGRA PRESTA MISTA: (Preço - Entrada) * Fator + 6%
                const valorRestante = Math.max(0, preco - entrada);
                const prestaMista = (valorRestante * fator) * 1.06;
                
                // GARANTIAS CARNÊ: 1x a 5x SEM JUROS NA GARANTIA (produto com juros), 6x a 12x COM JUROS
                let garantia36Final = 0;
                if (g36 > 0) {
                    if (prazo <= 5) {
                        // 1x a 5x: PRODUTO COM JUROS + GARANTIA SEM JUROS
                        const valorProdutoComJuros = (preco - entrada) * fator;
                        const garantiaSemJuros = g36 / prazo;
                        garantia36Final = valorProdutoComJuros + garantiaSemJuros;
                    } else {
                        // 6x a 12x: COM JUROS (aplica fatores no total)
                        const valorComGarantia36 = Math.max(0, preco - entrada + g36);
                        garantia36Final = valorComGarantia36 * fator;
                    }
                }
                
                let garantia24Final = 0;
                if (g24 > 0) {
                    if (prazo <= 5) {
                        // 1x a 5x: PRODUTO COM JUROS + GARANTIA SEM JUROS
                        const valorProdutoComJuros = (preco - entrada) * fator;
                        const garantiaSemJuros = g24 / prazo;
                        garantia24Final = valorProdutoComJuros + garantiaSemJuros;
                    } else {
                        // 6x a 12x: COM JUROS (aplica fatores no total)
                        const valorComGarantia24 = Math.max(0, preco - entrada + g24);
                        garantia24Final = valorComGarantia24 * fator;
                    }
                }
                
                // GARANTIA 12m CARNÊ: 1x a 5x SEM JUROS NA GARANTIA (produto com juros), 6x a 12x COM JUROS
                let garantia12Final = 0;
                if (g12 > 0) {
                    if (prazo <= 5) {
                        // 1x a 5x: PRODUTO COM JUROS + GARANTIA SEM JUROS
                        const valorProdutoComJuros = (preco - entrada) * fator;
                        const garantiaSemJuros = g12 / prazo;
                        garantia12Final = valorProdutoComJuros + garantiaSemJuros;
                    } else {
                        // 6x a 12x: COM JUROS (aplica fatores no total)
                        const valorComGarantia12 = Math.max(0, preco - entrada + g12);
                        garantia12Final = valorComGarantia12 * fator;
                    }
                }
                
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${prazo}x</td>
                    <td>${formatarParaMoeda(prestacao)}</td>
                    <td>${formatarParaMoeda(prestaMista)}</td>
                    <td>${g36 > 0 ? formatarParaMoeda(garantia36Final) : ''}</td>
                    <td>${g24 > 0 ? formatarParaMoeda(garantia24Final) : ''}</td>
                    <td>${g12 > 0 ? formatarParaMoeda(garantia12Final) : ''}</td>
                `;
                
                // Adiciona eventos múltiplos para máxima sensibilidade
                const cells = row.querySelectorAll('td');
                cells[0].addEventListener('click', (e) => { e.preventDefault(); selecionarLinha(cells[0]); });
                cells[0].addEventListener('touchstart', (e) => { e.preventDefault(); selecionarLinha(cells[0]); });
                cells[0].addEventListener('mousedown', (e) => { e.preventDefault(); selecionarLinha(cells[0]); });
                
                cells[1].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[1], formatarParaMoeda(prestacao), `${prazo}x Carnê`); });
                cells[1].addEventListener('touchstart', (e) => { e.preventDefault(); selecionarValor(cells[1], formatarParaMoeda(prestacao), `${prazo}x Carnê`); });
                cells[1].addEventListener('mousedown', (e) => { e.preventDefault(); selecionarValor(cells[1], formatarParaMoeda(prestacao), `${prazo}x Carnê`); });
                
                cells[2].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[2], formatarParaMoeda(prestaMista), `${prazo}x Presta Mista`); });
                cells[2].addEventListener('touchstart', (e) => { e.preventDefault(); selecionarValor(cells[2], formatarParaMoeda(prestaMista), `${prazo}x Presta Mista`); });
                cells[2].addEventListener('mousedown', (e) => { e.preventDefault(); selecionarValor(cells[2], formatarParaMoeda(prestaMista), `${prazo}x Presta Mista`); });
                
                if (g36 > 0) {
                    cells[3].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[3], formatarParaMoeda(garantia36Final), `${prazo}x + 36m`); });
                    cells[3].addEventListener('touchstart', (e) => { e.preventDefault(); selecionarValor(cells[3], formatarParaMoeda(garantia36Final), `${prazo}x + 36m`); });
                    cells[3].addEventListener('mousedown', (e) => { e.preventDefault(); selecionarValor(cells[3], formatarParaMoeda(garantia36Final), `${prazo}x + 36m`); });
                }
                
                if (g24 > 0) {
                    cells[4].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[4], formatarParaMoeda(garantia24Final), `${prazo}x + 24m`); });
                    cells[4].addEventListener('touchstart', (e) => { e.preventDefault(); selecionarValor(cells[4], formatarParaMoeda(garantia24Final), `${prazo}x + 24m`); });
                    cells[4].addEventListener('mousedown', (e) => { e.preventDefault(); selecionarValor(cells[4], formatarParaMoeda(garantia24Final), `${prazo}x + 24m`); });
                }
                
                if (g12 > 0) {
                    cells[5].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[5], formatarParaMoeda(garantia12Final), `${prazo}x + 12m`); });
                    cells[5].addEventListener('touchstart', (e) => { e.preventDefault(); selecionarValor(cells[5], formatarParaMoeda(garantia12Final), `${prazo}x + 12m`); });
                    cells[5].addEventListener('mousedown', (e) => { e.preventDefault(); selecionarValor(cells[5], formatarParaMoeda(garantia12Final), `${prazo}x + 12m`); });
                }
            });
        }



        // Cálculo da tabela parcelamento exclusivo - MODALIDADE CARNÊ
        function calcularTabelaGerente(preco, entrada, g36, g24, g12) {
            calcularTabelaGerenteCarne(preco, entrada, g12);
            calcularTabelaGerenteCartao(preco, entrada, g12);
        }

        // Subtabela CARNÊ EXCLUSIVO
        function calcularTabelaGerenteCarne(preco, entrada, g12) {
            const tbody = document.getElementById('tabelaGerenteCarne');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const prazos = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            const fatoresCarne = {
                1: 1.0690, 2: 0.5523, 3: 0.3804, 4: 0.2946, 5: 0.2432, 6: 0.2091,
                7: 0.1849, 8: 0.1668, 9: 0.1528, 10: 0.1417, 11: 0.1327, 12: 0.1252
            };
            
            prazos.forEach(prazo => {
                const fatorCarne = fatoresCarne[prazo] || 0;
                
                // CARNÊ EXCLUSIVO - mesma regra: (Preço * fator * parcelas) - entrada / parcelas
                const valorParcela = preco * fatorCarne;
                const valorTotalParcelas = valorParcela * prazo;
                const valorComEntrada = valorTotalParcelas - entrada;
                const prestacaoCarne = valorComEntrada / prazo;
                
                // PRESTA MISTA + G.E (+12)
                let prestaMistaComGE = 0;
                if (g12 > 0) {
                    if (prazo <= 3) {
                        const valorTotal = preco - entrada + g12;
                        const valorBase = valorTotal / prazo;
                        prestaMistaComGE = valorBase;
                    } else {
                        const valorComGarantia12 = Math.max(0, preco - entrada + g12);
                        prestaMistaComGE = (valorComGarantia12 * fatorCarne);
                    }
                }
                
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${prazo}x</td>
                    <td>${formatarParaMoeda(prestacaoCarne)}</td>
                    <td>${g12 > 0 ? formatarParaMoeda(prestaMistaComGE) : ''}</td>
                `;
                
                const cells = row.querySelectorAll('td');
                cells[0].addEventListener('click', (e) => { e.preventDefault(); selecionarLinha(cells[0]); });
                cells[1].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[1], formatarParaMoeda(prestacaoCarne), `${prazo}x Carnê Exclusivo`); });
                
                if (g12 > 0) {
                    cells[2].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[2], formatarParaMoeda(prestaMistaComGE), `${prazo}x Carnê com Benefícios Zenir`); });
                }
            });
        }

        // Subtabela CARTÃO EXCLUSIVO
        function calcularTabelaGerenteCartao(preco, entrada, g12) {
            const tbody = document.getElementById('tabelaGerenteCartao');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const prazos = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            const fatoresCartao = {
                1: 1.0292, 2: 0.5220, 3: 0.3530, 4: 0.2685, 5: 0.2179, 6: 0.1841,
                7: 0.1600, 8: 0.1420, 9: 0.1280, 10: 0.1168, 11: 0.1076, 12: 0.1000
            };
            
            prazos.forEach(prazo => {
                const fatorCartao = fatoresCartao[prazo] || 0;
                
                // CARTÃO EXCLUSIVO
                let prestacaoCartao;
                if (prazo === 12) {
                    const valorParcela = preco * fatorCartao;
                    const valorTotalParcelas = valorParcela * 12;
                    const valorComEntrada = valorTotalParcelas - entrada;
                    prestacaoCartao = valorComEntrada / 12;
                } else {
                    const valorFinanciado = Math.max(0, preco - entrada);
                    prestacaoCartao = valorFinanciado * fatorCartao;
                }
                
                // G.E (+12) - Garantia Estendida 12 meses
                let garantia12Final = 0;
                if (g12 > 0) {
                    if (prazo <= 3) {
                        const valorTotal = preco - entrada + g12;
                        garantia12Final = valorTotal / prazo;
                    } else {
                        const valorComGarantia12 = Math.max(0, preco - entrada + g12);
                        garantia12Final = valorComGarantia12 * fatorCartao;
                    }
                }
                
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${prazo}x</td>
                    <td>${formatarParaMoeda(prestacaoCartao)}</td>
                    <td>${g12 > 0 ? formatarParaMoeda(garantia12Final) : ''}</td>
                `;
                
                const cells = row.querySelectorAll('td');
                cells[0].addEventListener('click', (e) => { e.preventDefault(); selecionarLinha(cells[0]); });
                cells[1].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[1], formatarParaMoeda(prestacaoCartao), `${prazo}x Cartão Normal`); });
                
                if (g12 > 0) {
                    cells[2].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[2], formatarParaMoeda(garantia12Final), `${prazo}x Cartão com Benefícios Zenir`); });
                }
            });
        }



        // Cálculo da tabela cartão exclusivo - APENAS ATÉ 12 PARCELAS
        function calcularTabelaCartaoExclusivo(preco, entrada, g36, g24, g12) {
            const tbody = document.getElementById('tabelaCartaoExclusivo');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const prazos = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            const fatores = {
                1: 1.0292, 2: 0.5220, 3: 0.3530, 4: 0.2685, 5: 0.2179, 6: 0.1841,
                7: 0.1600, 8: 0.1420, 9: 0.1280, 10: 0.1168, 11: 0.1076, 12: 0.1000
            };
            
            prazos.forEach(prazo => {
                const fator = fatores[prazo] || 0;
                
                // NOVA REGRA CARTÃO: Para 12x, entrada abate do valor total das parcelas
                let prestacao;
                if (prazo === 12) {
                    // Para 12x CARTÃO: (Preço * fator * 12) - entrada / 12
                    const valorParcela = preco * fator;
                    const valorTotalParcelas = valorParcela * 12;
                    const valorComEntrada = valorTotalParcelas - entrada;
                    prestacao = valorComEntrada / 12;
                } else {
                    // Para 1x a 11x: regra normal (entrada abate do preço)
                    const valorFinanciado = Math.max(0, preco - entrada);
                    prestacao = valorFinanciado * fator;
                }
                
                // GARANTIAS CARTÃO: 1x a 6x SEM JUROS NA GARANTIA (produto com juros), 7x a 12x COM JUROS
                let garantia36Final = 0;
                if (g36 > 0) {
                    if (prazo <= 6) {
                        // 1x a 6x: PRODUTO COM JUROS + GARANTIA SEM JUROS
                        const valorProdutoComJuros = (preco - entrada) * fator;
                        const garantiaSemJuros = g36 / prazo;
                        garantia36Final = valorProdutoComJuros + garantiaSemJuros;
                    } else {
                        // 7x a 12x: COM JUROS (aplica fatores no total)
                        const valorComGarantia36 = Math.max(0, preco - entrada + g36);
                        garantia36Final = valorComGarantia36 * fator;
                    }
                }
                
                let garantia24Final = 0;
                if (g24 > 0) {
                    if (prazo <= 6) {
                        // 1x a 6x: PRODUTO COM JUROS + GARANTIA SEM JUROS
                        const valorProdutoComJuros = (preco - entrada) * fator;
                        const garantiaSemJuros = g24 / prazo;
                        garantia24Final = valorProdutoComJuros + garantiaSemJuros;
                    } else {
                        // 7x a 12x: COM JUROS (aplica fatores no total)
                        const valorComGarantia24 = Math.max(0, preco - entrada + g24);
                        garantia24Final = valorComGarantia24 * fator;
                    }
                }
                
                // GARANTIA 12m CARTÃO: 1x a 6x SEM JUROS NA GARANTIA (produto com juros), 7x a 12x COM JUROS
                let garantia12Final = 0;
                if (g12 > 0) {
                    if (prazo <= 6) {
                        // 1x a 6x: PRODUTO COM JUROS + GARANTIA SEM JUROS
                        const valorProdutoComJuros = (preco - entrada) * fator;
                        const garantiaSemJuros = g12 / prazo;
                        garantia12Final = valorProdutoComJuros + garantiaSemJuros;
                    } else {
                        // 7x a 12x: COM JUROS (aplica fatores no total)
                        const valorComGarantia12 = Math.max(0, preco - entrada + g12);
                        garantia12Final = valorComGarantia12 * fator;
                    }
                }
                
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td onclick="selecionarLinha(this)">${prazo}x</td>
                    <td onclick="selecionarValor(this, '${formatarParaMoeda(prestacao)}', '${prazo}x Cartão')">${formatarParaMoeda(prestacao)}</td>
                    <td onclick="selecionarValor(this, '${formatarParaMoeda(garantia36Final)}', '${prazo}x Cartão + 36m')">${g36 > 0 ? formatarParaMoeda(garantia36Final) : ''}</td>
                    <td onclick="selecionarValor(this, '${formatarParaMoeda(garantia24Final)}', '${prazo}x Cartão + 24m')">${g24 > 0 ? formatarParaMoeda(garantia24Final) : ''}</td>
                    <td onclick="selecionarValor(this, '${formatarParaMoeda(garantia12Final)}', '${prazo}x Cartão + 12m')">${g12 > 0 ? formatarParaMoeda(garantia12Final) : ''}</td>
                `;
            });
        }

        // Cálculo da tabela gerente exclusivo - DIVIDIDA EM CARNÊ E CARTÃO
        function calcularTabelaGerenteExclusivo(preco, entrada, percentGerente, g36, g24, g12) {
            calcularTabelaGerenteExclusivoCarne(preco, entrada, percentGerente, g12);
            calcularTabelaGerenteExclusivoCartao(preco, entrada, percentGerente, g12);
        }

        // Subtabela CARNÊ EXCLUSIVO
        function calcularTabelaGerenteExclusivoCarne(preco, entrada, percentGerente, g12) {
            const tbody = document.getElementById('tabelaGerenteExclusivoCarne');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const desconto = preco * (percentGerente / 100);
            const precoComDesconto = preco - desconto;
            
            const prazos = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            const fatoresCarne = {
                1: 1.0690, 2: 0.5523, 3: 0.3804, 4: 0.2946, 5: 0.2432, 6: 0.2091,
                7: 0.1849, 8: 0.1668, 9: 0.1528, 10: 0.1417, 11: 0.1327, 12: 0.1252
            };
            
            prazos.forEach(prazo => {
                const fatorCarne = fatoresCarne[prazo] || 0;
                
                // CARNÊ NORMAL - SEM DESCONTO DO GERENTE (usa preço original)
                // Regra: (Preço * fator * parcelas) - entrada / parcelas
                const valorParcela = preco * fatorCarne;
                const valorTotalParcelas = valorParcela * prazo;
                const valorComEntrada = valorTotalParcelas - entrada;
                const prestacaoCarne = valorComEntrada / prazo;
                
                // CARNÊ COM BENEFÍCIOS (PRESTA MISTA) - COM DESCONTO DO GERENTE
                let prestaMistaComGE = 0;
                // REGRA: Só calcula se tem desconto do gerente E tem garantia 12m
                if (percentGerente > 0 && g12 > 0) {
                    // NOVA REGRA PRESTA MISTA: (Preço com desconto - Entrada) * Fator + 6%
                    const valorRestante = Math.max(0, precoComDesconto - entrada);
                    prestaMistaComGE = (valorRestante * fatorCarne) * 1.06;
                }
                
                // CARNÊ COM BENEFÍCIOS (G.E) - USA O CÁLCULO DA GARANTIA 12M
                let geComGarantia12 = 0;
                if (percentGerente > 0 && g12 > 0) {
                    if (prazo <= 5) {
                        // 1x a 5x: PRODUTO COM JUROS + GARANTIA SEM JUROS
                        const valorProdutoComJuros = (precoComDesconto - entrada) * fatorCarne;
                        const garantiaSemJuros = g12 / prazo;
                        geComGarantia12 = valorProdutoComJuros + garantiaSemJuros;
                    } else {
                        // 6x a 12x: COM JUROS (aplica fatores no total)
                        const valorComGarantia12 = Math.max(0, precoComDesconto - entrada + g12);
                        geComGarantia12 = valorComGarantia12 * fatorCarne;
                    }
                }
                
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${prazo}x</td>
                    <td>${formatarParaMoeda(prestacaoCarne)}</td>
                    <td>${(percentGerente > 0 && g12 > 0) ? formatarParaMoeda(prestaMistaComGE) : ''}</td>
                    <td>${(percentGerente > 0 && g12 > 0) ? formatarParaMoeda(geComGarantia12) : ''}</td>
                `;
                
                const cells = row.querySelectorAll('td');
                cells[0].addEventListener('click', (e) => { e.preventDefault(); selecionarLinha(cells[0]); });
                cells[1].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[1], formatarParaMoeda(prestacaoCarne), `${prazo}x Gerente Exclusivo Carnê Normal`); });
                
                if (percentGerente > 0 && g12 > 0) {
                    cells[2].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[2], formatarParaMoeda(prestaMistaComGE), `${prazo}x Gerente Exclusivo Carnê com Benefícios (Presta Mista)`); });
                    cells[3].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[3], formatarParaMoeda(geComGarantia12), `${prazo}x Gerente Exclusivo Carnê com Benefícios (G.E)`); });
                }
            });
        }

        // Subtabela CARTÃO EXCLUSIVO
        function calcularTabelaGerenteExclusivoCartao(preco, entrada, percentGerente, g12) {
            const tbody = document.getElementById('tabelaGerenteExclusivoCartao');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const desconto = preco * (percentGerente / 100);
            const precoComDesconto = preco - desconto;
            
            const prazos = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            const fatoresCartao = {
                1: 1.0292, 2: 0.5220, 3: 0.3530, 4: 0.2685, 5: 0.2179, 6: 0.1841,
                7: 0.1600, 8: 0.1420, 9: 0.1280, 10: 0.1168, 11: 0.1076, 12: 0.1000
            };
            
            prazos.forEach(prazo => {
                const fatorCartao = fatoresCartao[prazo] || 0;
                
                // CARTÃO NORMAL - SEM DESCONTO DO GERENTE (usa preço original)
                let prestacaoCartao;
                if (prazo === 12) {
                    const valorParcela = preco * fatorCartao;
                    const valorTotalParcelas = valorParcela * 12;
                    const valorComEntrada = valorTotalParcelas - entrada;
                    prestacaoCartao = valorComEntrada / 12;
                } else {
                    const valorFinanciado = Math.max(0, preco - entrada);
                    prestacaoCartao = valorFinanciado * fatorCartao;
                }
                
                // G.E (+12) - COM DESCONTO DO GERENTE
                let garantia12Final = 0;
                // REGRA: Só calcula se tem desconto do gerente E tem garantia 12m
                if (percentGerente > 0 && g12 > 0) {
                    if (prazo <= 6) {
                        const valorTotal = precoComDesconto - entrada + g12;
                        garantia12Final = valorTotal / prazo;
                    } else {
                        const valorComGarantia12 = Math.max(0, precoComDesconto - entrada + g12);
                        garantia12Final = valorComGarantia12 * fatorCartao;
                    }
                }
                
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${prazo}x</td>
                    <td>${formatarParaMoeda(prestacaoCartao)}</td>
                    <td>${(percentGerente > 0 && g12 > 0) ? formatarParaMoeda(garantia12Final) : ''}</td>
                `;
                
                const cells = row.querySelectorAll('td');
                cells[0].addEventListener('click', (e) => { e.preventDefault(); selecionarLinha(cells[0]); });
                cells[1].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[1], formatarParaMoeda(prestacaoCartao), `${prazo}x Gerente Exclusivo Cartão Normal`); });
                
                if (percentGerente > 0 && g12 > 0) {
                    cells[2].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[2], formatarParaMoeda(garantia12Final), `${prazo}x Gerente Exclusivo Cartão com Benefícios`); });
                }
            });
        }

        // Função para alternar entre abas
        function switchTab(tabName) {
            // Só permite abrir uma modalidade quando houver um preço válido informado
            const precoEl = document.getElementById('precoProduto');
            const precoNum = (typeof converterParaNumero === 'function' && precoEl) ? converterParaNumero(precoEl.value) : 0;
            if (!precoNum || precoNum <= 0) {
                // Mantém tudo oculto até informar o preço
                resetarSelecaoModalidade();
                return;
            }

            currentTab = tabName; // registra modo selecionado
            // Determina qual conjunto de abas está ativo
            const activeNavTabs = currentMainTab === 'tabela' ? 
                document.querySelectorAll('#nav-tabs-tabela .tab-btn') : 
                document.querySelectorAll('#nav-tabs-promocao .tab-btn');
            
            // Remove active de todos os botões do conjunto ativo
            activeNavTabs.forEach(btn => btn.classList.remove('active'));
            
            // Esconde todo o conteúdo
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Ativa o botão clicado
            if (event && event.target) {
                event.target.classList.add('active');
            }
            
            // Mostra o conteúdo correspondente
            const content = document.getElementById(tabName + '-content');
            if (content) content.classList.add('active');
            
            // Mostra/esconde card do gerente exclusivo (apenas para tabela principal)
            const gerenteExclusivoCard = document.getElementById('gerenteExclusivoCard');
            if (gerenteExclusivoCard) {
                gerenteExclusivoCard.style.display = tabName === 'gerenteExclusivo' ? 'block' : 'none';
            }
            
            currentTab = tabName;
        }

        // Função para selecionar linha inteira (ao clicar no prazo)
        function selecionarLinha(elemento) {
            // Remove seleção anterior e estilos inline
            document.querySelectorAll('tbody tr.selected-row').forEach(tr => {
                tr.classList.remove('selected-row');
                tr.querySelectorAll('td').forEach(td => {
                    td.classList.remove('pulse-animation');
                    td.style.removeProperty('background');
                    td.style.removeProperty('border');
                    td.style.removeProperty('color');
                    td.style.removeProperty('font-weight');
                    td.style.removeProperty('box-shadow');
                    td.style.removeProperty('transform');
                    td.style.removeProperty('z-index');
                });
            });
            
            // Adiciona seleção à linha inteira
            const linha = elemento.parentElement;
            if (linha) {
                linha.classList.add('selected-row');
                
                // Aplica estilos inline para garantir visibilidade
                linha.querySelectorAll('td').forEach(td => {
                    td.style.background = '#4caf50';
                    td.style.border = '3px solid #2e7d32';
                    td.style.color = 'white';
                    td.style.fontWeight = '800';
                    td.style.boxShadow = '0 0 25px rgba(76, 175, 80, 0.8)';
                    td.style.transform = 'scale(1.05)';
                    td.style.zIndex = '10';
                    td.classList.add('pulse-animation');
                    
                    // Re-trigger da animação
                    setTimeout(() => {
                        td.classList.remove('pulse-animation');
                        setTimeout(() => td.classList.add('pulse-animation'), 10);
                    }, 10);
                });
            }
            
            console.log('Linha selecionada:', elemento.textContent);
        }

        // Função para selecionar valor da tabela
        function selecionarValor(elemento, valor, descricao) {
            // Remove seleção anterior e estilos inline
            document.querySelectorAll('tbody tr.selected-row').forEach(tr => {
                tr.classList.remove('selected-row');
                tr.querySelectorAll('td').forEach(td => {
                    td.classList.remove('pulse-animation');
                    td.style.removeProperty('background');
                    td.style.removeProperty('border');
                    td.style.removeProperty('color');
                    td.style.removeProperty('font-weight');
                    td.style.removeProperty('box-shadow');
                    td.style.removeProperty('transform');
                    td.style.removeProperty('z-index');
                });
            });
            
            // Adiciona seleção à linha inteira
            const linha = elemento.parentElement;
            if (linha) {
                linha.classList.add('selected-row');
                
                // Aplica estilos inline para garantir visibilidade
                linha.querySelectorAll('td').forEach(td => {
                    td.style.background = '#4caf50';
                    td.style.border = '3px solid #2e7d32';
                    td.style.color = 'white';
                    td.style.fontWeight = '800';
                    td.style.boxShadow = '0 0 25px rgba(76, 175, 80, 0.8)';
                    td.style.transform = 'scale(1.05)';
                    td.style.zIndex = '10';
                    td.classList.add('pulse-animation');
                    
                    // Re-trigger da animação
                    setTimeout(() => {
                        td.classList.remove('pulse-animation');
                        setTimeout(() => td.classList.add('pulse-animation'), 10);
                    }, 10);
                });
            }
            
            console.log('Valor selecionado:', valor, descricao);
        }

        // Cálculo da tabela promoção carnê
        function calcularTabelaPromocaoCarne(preco, entrada, g36, g24, g12) {
            const tbody = document.getElementById('tabelaPromocaoCarne');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const prazos = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            const fatores = {
                1: 1.0690, 2: 0.5523, 3: 0.3804, 4: 0.2946, 5: 0.2432, 6: 0.2091,
                7: 0.1849, 8: 0.1668, 9: 0.1528, 10: 0.1417, 11: 0.1327, 12: 0.1252
            };
            
            prazos.forEach(prazo => {
                const fator = fatores[prazo] || 0;
                
                // CARNÊ PROMOÇÃO - mesma regra: (Preço * fator * parcelas) - entrada / parcelas
                const valorParcela = preco * fator;
                const valorTotalParcelas = valorParcela * prazo;
                const valorComEntrada = valorTotalParcelas - entrada;
                const prestacao = valorComEntrada / prazo;
                
                // PRESTA MISTA PROMOÇÃO
                const valorRestante = Math.max(0, preco - entrada);
                const prestaMista = (valorRestante * fator) * 1.06;
                
                // GARANTIAS PROMOÇÃO
                let garantia36Final = 0;
                if (g36 > 0) {
                    if (prazo <= 6) {
                        const valorTotal = preco - entrada + g36;
                        garantia36Final = valorTotal / prazo;
                    } else {
                        const valorComGarantia36 = Math.max(0, preco - entrada + g36);
                        garantia36Final = valorComGarantia36 * fator;
                    }
                }
                
                let garantia24Final = 0;
                if (g24 > 0) {
                    if (prazo <= 6) {
                        const valorTotal = preco - entrada + g24;
                        garantia24Final = valorTotal / prazo;
                    } else {
                        const valorComGarantia24 = Math.max(0, preco - entrada + g24);
                        garantia24Final = valorComGarantia24 * fator;
                    }
                }
                
                let garantia12Final = 0;
                if (g12 > 0) {
                    if (prazo <= 6) {
                        const valorTotal = preco - entrada + g12;
                        garantia12Final = valorTotal / prazo;
                    } else {
                        const valorComGarantia12 = Math.max(0, preco - entrada + g12);
                        garantia12Final = valorComGarantia12 * fator;
                    }
                }
                
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${prazo}x</td>
                    <td>${formatarParaMoeda(prestacao)}</td>
                    <td>${formatarParaMoeda(prestaMista)}</td>
                    <td>${g36 > 0 ? formatarParaMoeda(garantia36Final) : ''}</td>
                    <td>${g24 > 0 ? formatarParaMoeda(garantia24Final) : ''}</td>
                    <td>${g12 > 0 ? formatarParaMoeda(garantia12Final) : ''}</td>
                `;
                
                // Adiciona eventos de clique
                const cells = row.querySelectorAll('td');
                cells[0].addEventListener('click', (e) => { e.preventDefault(); selecionarLinha(cells[0]); });
                cells[1].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[1], formatarParaMoeda(prestacao), `${prazo}x Promoção Carnê`); });
                cells[2].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[2], formatarParaMoeda(prestaMista), `${prazo}x Promoção Presta Mista`); });
                
                if (g36 > 0) {
                    cells[3].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[3], formatarParaMoeda(garantia36Final), `${prazo}x Promoção + 36m`); });
                }
                if (g24 > 0) {
                    cells[4].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[4], formatarParaMoeda(garantia24Final), `${prazo}x Promoção + 24m`); });
                }
                if (g12 > 0) {
                    cells[5].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[5], formatarParaMoeda(garantia12Final), `${prazo}x Promoção + 12m`); });
                }
            });
        }

        // Função para alternar o menu
        function toggleMenu() {
            const dropdown = document.getElementById('menuDropdown');
            dropdown.classList.toggle('show');
        }

        // Fechar menu ao clicar fora
        document.addEventListener('click', function(event) {
            const menuContainer = document.querySelector('.menu-container');
            const dropdown = document.getElementById('menuDropdown');
            
            if (!menuContainer.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });

        // Função para exportar dados
        function exportarDados() {
            const valores = currentMainTab === 'tabela' ? valoresTabela : valoresPromocao;
            const dados = {
                secao: currentMainTab === 'tabela' ? 'PREÇO DE TABELA' : 'PROMOÇÃO',
                valores: valores,
                timestamp: new Date().toLocaleString('pt-BR')
            };
            
            const dataStr = JSON.stringify(dados, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `simulador_zenir_${currentMainTab}_${new Date().toISOString().slice(0,10)}.json`;
            link.click();
            URL.revokeObjectURL(url);
            
            console.log('Dados exportados:', dados);
        }

        // Função para mostrar calculadora
        function mostrarCalculadora() {
            const calculadoraHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.55); z-index: 10000; display: flex; align-items: flex-start; justify-content: center;; padding-top: 10vh" onclick="this.remove()">
                    <div style="background: white; padding: 16px; border-radius: 12px; max-width: 300px; box-shadow: 0 8px 25px rgba(0,0,0,0.3);; max-height: 70vh; overflow: auto" onclick="event.stopPropagation()">
                        <div style="margin-bottom: 15px;">
                            <h3 style="color: #4682B4; margin: 0; text-align: center;">🧮 CALCULADORA</h3>
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 2px solid #dee2e6;">
                            <input id="calculadoraDisplay" type="text" readonly style="width: 100%; padding: 10px; font-size: 1.2rem; font-weight: bold; text-align: right; border: none; background: white; border-radius: 4px;" value="${calculadoraValorAtual || '0'}">
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                            <button onclick="limparCalculadora()" style="background: #dc3545; color: white; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer; grid-column: span 2;">C</button>
                            <button onclick="apagarUltimo()" style="background: #ffc107; color: #212529; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">⌫</button>
                            <button onclick="adicionarOperacao('/')" style="background: #6c757d; color: white; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">÷</button>
                            
                            <button onclick="adicionarNumero('7')" style="background: #e9ecef; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">7</button>
                            <button onclick="adicionarNumero('8')" style="background: #e9ecef; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">8</button>
                            <button onclick="adicionarNumero('9')" style="background: #e9ecef; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">9</button>
                            <button onclick="adicionarOperacao('*')" style="background: #6c757d; color: white; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">×</button>
                            
                            <button onclick="adicionarNumero('4')" style="background: #e9ecef; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">4</button>
                            <button onclick="adicionarNumero('5')" style="background: #e9ecef; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">5</button>
                            <button onclick="adicionarNumero('6')" style="background: #e9ecef; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">6</button>
                            <button onclick="adicionarOperacao('-')" style="background: #6c757d; color: white; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">-</button>
                            
                            <button onclick="adicionarNumero('1')" style="background: #e9ecef; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">1</button>
                            <button onclick="adicionarNumero('2')" style="background: #e9ecef; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">2</button>
                            <button onclick="adicionarNumero('3')" style="background: #e9ecef; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">3</button>
                            <button onclick="adicionarOperacao('+')" style="background: #6c757d; color: white; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">+</button>
                            
                            <button onclick="adicionarNumero('0')" style="background: #e9ecef; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">0</button>
                            <button onclick="adicionarDecimal()" style="background: #e9ecef; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">,</button>
                            <button onclick="calcularPercentual()" style="background: #17a2b8; color: white; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">%</button>
                            <button onclick="calcular()" style="background: #28a745; color: white; border: none; padding: 15px; border-radius: 6px; font-weight: bold; cursor: pointer;">=</button>
                        </div>
                        
                        <div style="margin-top: 15px; text-align: center; display: flex; gap: 8px; justify-content: center;">
                            <button class="btn-copy" onclick="copiarResultado()" style="background: #007bff; color: white; border: none; padding: 8px 16px; border-radius: 6px; font-size: 0.9rem; cursor: pointer;">📋 Copiar</button>
                            <button onclick="formatarComoMoeda()" style="background: #28a745; color: white; border: none; padding: 8px 16px; border-radius: 6px; font-size: 0.9rem; cursor: pointer;">💰 R$</button>
                            <button onclick="mostrarTaxasFatores()" style="background: #fd7e14; color: white; border: none; padding: 10px 15px; border-radius: 6px; font-size: 0.9rem; cursor: pointer;">📈 Fator</button>
                            <button onclick="usarNoSimulador()" style="background: #17a2b8; color: white; border: none; padding: 8px 16px; border-radius: 6px; font-size: 0.9rem; cursor: pointer;">📊 Usar</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', calculadoraHTML);
        }

        // Variáveis da calculadora
        let calculadoraValorAtual = '0';
        let calculadoraOperacao = null;
        let calculadoraValorAnterior = null;
        let calculadoraNovoNumero = true;

        
// Helpers para evitar bugs de ponto flutuante e padronizar exibição (BR)
function _round2(n) {
    return Math.round((n + Number.EPSILON) * 100) / 100;
}
function _parseCalcValue(str) {
    if (str === null || str === undefined) return 0;
    str = String(str).trim();
    if (str === '' || str.toLowerCase() === 'erro') return NaN;
    // remove "R$", espaços e qualquer coisa que não seja dígito, vírgula, ponto ou sinal
    str = str.replace(/[^\d,.\-]/g, '');
    // remove separador de milhar
    str = str.replace(/\./g, '');
    // converte vírgula decimal para ponto
    str = str.replace(',', '.');
    const n = parseFloat(str);
    return n;
}
function _formatCalcValue(n) {
    if (!isFinite(n)) return 'Erro';
    const r = _round2(n);
    // sempre 2 casas para bater com R$ e evitar "quebrado"
    let s = r.toFixed(2);
    // separador decimal BR
    s = s.replace('.', ',');
    // milhar
    s = s.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
    return s;
}

// Funções da calculadora
        function adicionarNumero(numero) {
            const display = document.getElementById('calculadoraDisplay');
            if (calculadoraNovoNumero) {
                calculadoraValorAtual = numero;
                calculadoraNovoNumero = false;
            } else {
                calculadoraValorAtual = calculadoraValorAtual === '0' ? numero : calculadoraValorAtual + numero;
            }
            display.value = calculadoraValorAtual;
        }

        function adicionarDecimal() {
            const display = document.getElementById('calculadoraDisplay');
            if (calculadoraNovoNumero) {
                calculadoraValorAtual = '0,';
                calculadoraNovoNumero = false;
            } else if (calculadoraValorAtual.indexOf(',') === -1) {
                calculadoraValorAtual += ',';
            }
            display.value = calculadoraValorAtual;
        }

        function adicionarOperacao(op) {
            const display = document.getElementById('calculadoraDisplay');
            
            if (calculadoraValorAnterior !== null && calculadoraOperacao !== null && !calculadoraNovoNumero) {
                calcular();
            }
            
            calculadoraOperacao = op;
            calculadoraValorAnterior = calculadoraValorAtual;
            calculadoraNovoNumero = true;
        }

        function calcular() {
            const display = document.getElementById('calculadoraDisplay');
            
            if (calculadoraOperacao === null || calculadoraValorAnterior === null) return;
            
            const anterior = _parseCalcValue(calculadoraValorAnterior);
            const atual = _parseCalcValue(calculadoraValorAtual);
            
            let resultado;
            
            switch (calculadoraOperacao) {
                case '+':
                    resultado = anterior + atual;
                    break;
                case '-':
                    resultado = anterior - atual;
                    break;
                case '*':
                    resultado = anterior * atual;
                    break;
                case '/':
                    if (atual === 0) {
                        display.value = 'Erro';
                        return;
                    }
                    resultado = anterior / atual;
                    break;
                default:
                    return;
            }
            
            resultado = _round2(resultado);
            calculadoraValorAtual = _formatCalcValue(resultado);
            calculadoraOperacao = null;
            calculadoraValorAnterior = null;
            calculadoraNovoNumero = true;
            
            display.value = calculadoraValorAtual;
        }

        function limparCalculadora() {
            const display = document.getElementById('calculadoraDisplay');
            calculadoraValorAtual = '0';
            calculadoraOperacao = null;
            calculadoraValorAnterior = null;
            calculadoraNovoNumero = true;
            display.value = calculadoraValorAtual;
        }

        function apagarUltimo() {
            const display = document.getElementById('calculadoraDisplay');
            if (calculadoraValorAtual.length > 1) {
                calculadoraValorAtual = calculadoraValorAtual.slice(0, -1);
            } else {
                calculadoraValorAtual = '0';
                calculadoraNovoNumero = true;
            }
            display.value = calculadoraValorAtual;
        }

        function copiarResultado() {
            const display = document.getElementById('calculadoraDisplay');
            const valor = display.value;
            
            // Cria um elemento temporário para copiar
            const tempInput = document.createElement('input');
            tempInput.value = valor;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);
            
            // Feedback visual
            const botao = event.target;
            const textoOriginal = botao.textContent;
            botao.textContent = '✅ Copiado!';
            botao.style.background = '#28a745';
            setTimeout(() => {
                botao.textContent = textoOriginal;
                botao.style.background = '#007bff';
            }, 1500);
        }

        function calcularPercentual() {
            const display = document.getElementById('calculadoraDisplay');
            
            if (calculadoraValorAnterior !== null && calculadoraOperacao !== null) {
                // Se há uma operação pendente, calcula o percentual
                const base = _parseCalcValue(calculadoraValorAnterior);
                const percentual = _parseCalcValue(calculadoraValorAtual);
                
                let resultado;
                switch (calculadoraOperacao) {
                    case '+':
                        // Adiciona percentual: base + (base * percentual / 100)
                        resultado = base + (base * percentual / 100);
                        break;
                    case '-':
                        // Subtrai percentual: base - (base * percentual / 100)
                        resultado = base - (base * percentual / 100);
                        break;
                    case '*':
                        // Multiplica por percentual: base * (percentual / 100)
                        resultado = base * (percentual / 100);
                        break;
                    case '/':
                        // Divide por percentual: base / (percentual / 100)
                        if (percentual === 0) {
                            display.value = 'Erro';
                            return;
                        }
                        resultado = base / (percentual / 100);
                        break;
                    default:
                        return;
                }
                
                resultado = _round2(resultado);
            calculadoraValorAtual = _formatCalcValue(resultado);
                calculadoraOperacao = null;
                calculadoraValorAnterior = null;
                calculadoraNovoNumero = true;
                
                display.value = calculadoraValorAtual;
            } else {
                // Se não há operação, converte o valor atual para percentual (divide por 100)
                const valor = parseFloat(calculadoraValorAtual.replace(',', '.'));
                const resultado = valor / 100;
                resultado = _round2(resultado);
            calculadoraValorAtual = _formatCalcValue(resultado);
                display.value = calculadoraValorAtual;
                calculadoraNovoNumero = true;
            }
        }

        function formatarComoMoeda() {
            const display = document.getElementById('calculadoraDisplay');
            let valor = display.value;
            
            // Converte para formato de moeda brasileira
            if (valor && valor !== '0' && valor !== 'Erro') {
                // Remove vírgulas e converte para número
                const numero = _parseCalcValue(valor);
                if (!isNaN(numero)) {
                    // Formata como moeda brasileira corretamente
                    let valorFormatado = numero.toFixed(2);
                    valorFormatado = valorFormatado.replace('.', ',');
                    valorFormatado = valorFormatado.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
                    valorFormatado = 'R$ ' + valorFormatado;
                    
                    // Atualiza o display da calculadora
                    display.value = valorFormatado;
                    calculadoraValorAtual = valorFormatado;
                    
                    // Feedback visual
                    const botao = event.target;
                    const textoOriginal = botao.textContent;
                    botao.textContent = '✅ Formatado!';
                    botao.style.background = '#218838';
                    setTimeout(() => {
                        botao.textContent = textoOriginal;
                        botao.style.background = '#28a745';
                    }, 1500);
                }
            }
        }

        function usarNoSimulador() {
            const display = document.getElementById('calculadoraDisplay');
            let valor = display.value;
            
            // Se já está formatado como moeda, usa direto
            if (valor.includes('R$')) {
                // Coloca no campo de preço do produto
                const campoPrecoProduto = document.getElementById('precoProduto');
                if (campoPrecoProduto) {
                    campoPrecoProduto.value = valor;
                    salvarValoresAtuais();
                    calcularTudo();
                    
                    // Feedback visual
                    const botao = event.target;
                    const textoOriginal = botao.textContent;
                    botao.textContent = '✅ Usado!';
                    botao.style.background = '#138496';
                    setTimeout(() => {
                        botao.textContent = textoOriginal;
                        botao.style.background = '#17a2b8';
                    }, 1500);
                    
                    // Fecha a calculadora após 1 segundo
                    setTimeout(() => {
                        const calculadoraModal = document.querySelector('[style*="position: fixed"][style*="z-index: 10000"]');
                        if (calculadoraModal) calculadoraModal.remove();
                    }, 1000);
                }
            } else {
                // Converte para formato de moeda brasileira primeiro
                if (valor && valor !== '0' && valor !== 'Erro') {
                    // Remove vírgulas e converte para número
                    const numero = _parseCalcValue(valor);
                    if (!isNaN(numero)) {
                        // Formata como moeda brasileira corretamente
                        let valorFormatado = numero.toFixed(2);
                        valorFormatado = valorFormatado.replace('.', ',');
                        valorFormatado = valorFormatado.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
                        valorFormatado = 'R$ ' + valorFormatado;
                        
                        // Coloca no campo de preço do produto
                        const campoPrecoProduto = document.getElementById('precoProduto');
                        if (campoPrecoProduto) {
                            campoPrecoProduto.value = valorFormatado;
                            salvarValoresAtuais();
                            calcularTudo();
                            
                            // Feedback visual
                            const botao = event.target;
                            const textoOriginal = botao.textContent;
                            botao.textContent = '✅ Usado!';
                            botao.style.background = '#138496';
                            setTimeout(() => {
                                botao.textContent = textoOriginal;
                                botao.style.background = '#17a2b8';
                            }, 1500);
                            
                            // Fecha a calculadora após 1 segundo
                            setTimeout(() => {
                                const calculadoraModal = document.querySelector('[style*="position: fixed"][style*="z-index: 10000"]');
                                if (calculadoraModal) calculadoraModal.remove();
                            }, 1000);
                        }
                    }
                }
            }
        }

        // Função para mostrar taxa/fatores
        function mostrarTaxasFatores() {
            const taxasHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; display: flex; align-items: center; justify-content: center;" onclick="this.remove()">
                    <div style="background: white; padding: 20px; border-radius: 12px; max-width: 550px; max-height: 85%; overflow-y: auto;" onclick="event.stopPropagation()">
                        <div style="margin-bottom: 15px; text-align: center;">
                            <h3 style="color: #4682B4; margin: 0; font-size: 0.95rem;">📊 TAXA / FATORES DE PARCELAMENTO</h3>
                        </div>
                        
                        <!-- FATORES CARNÊ -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="background: linear-gradient(135deg, #ff6b35, #f7931e); color: white; padding: 8px; border-radius: 6px; margin: 0 0 10px 0; text-align: center; font-size: 0.8rem; font-weight: 700;">📄 FATORES CARNÊ</h4>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; font-size: 0.7rem;">
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>1x</strong><br>1.0690
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>2x</strong><br>0.5523
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>3x</strong><br>0.3804
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>4x</strong><br>0.2946
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>5x</strong><br>0.2432
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>6x</strong><br>0.2091
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>7x</strong><br>0.1849
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>8x</strong><br>0.1668
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>9x</strong><br>0.1528
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>10x</strong><br>0.1417
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>11x</strong><br>0.1327
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>12x</strong><br>0.1252
                                </div>
                            </div>
                        </div>
                        
                        <!-- FATORES CARTÃO -->
                        <div style="margin-bottom: 20px;">
                            <h4 style="background: linear-gradient(135deg, #4a90e2, #357abd); color: white; padding: 8px; border-radius: 6px; margin: 0 0 10px 0; text-align: center; font-size: 0.8rem; font-weight: 700;">💳 FATORES CARTÃO</h4>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; font-size: 0.7rem;">
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>1x</strong><br>1.0292
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>2x</strong><br>0.5220
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>3x</strong><br>0.3530
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>4x</strong><br>0.2685
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>5x</strong><br>0.2179
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>6x</strong><br>0.1841
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>7x</strong><br>0.1600
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>8x</strong><br>0.1420
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>9x</strong><br>0.1280
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>10x</strong><br>0.1168
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>11x</strong><br>0.1076
                                </div>
                                <div style="background: #f8f9fa; padding: 6px; border-radius: 3px; text-align: center; border: 1px solid #dee2e6;">
                                    <strong>12x</strong><br>0.1000
                                </div>
                            </div>
                        </div>
                        

                        

                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', taxasHTML);
        }

        // Array de mensagens motivacionais diárias
        const mensagensMotivacionais = [
            "🚀 Cada venda é uma oportunidade de transformar sonhos em realidade!",
            "💪 Sua determinação hoje é o sucesso de amanhã!",
            "⭐ Você tem o poder de fazer a diferença na vida das pessoas!",
            "🎯 Foque no cliente, o resultado vem naturalmente!",
            "🔥 Sua energia positiva é contagiante - use isso a seu favor!",
            "💎 Cada 'não' te aproxima do próximo 'sim'!",
            "🌟 Acredite em você, seus clientes também acreditarão!",
            "🏆 Grandes vendedores não nascem prontos, se fazem a cada dia!",
            "💫 Sua atitude determina sua altitude no mundo das vendas!",
            "🎪 Transforme cada apresentação em uma experiência única!",
            "🌈 Seja a solução que seu cliente estava procurando!",
            "⚡ A persistência é o combustível do sucesso!",
            "🎨 Pinte o futuro dos seus clientes com suas soluções!",
            "🔑 Você tem a chave para abrir portas de oportunidades!",
            "🌅 Cada novo dia é uma nova chance de brilhar!",
            "🎵 Deixe sua paixão pelas vendas ser sua melodia diária!",
            "🏅 Champions são feitos de pequenas vitórias diárias!",
            "🌊 Seja como a água: persistente e capaz de moldar qualquer obstáculo!",
            "🎭 Seja autêntico - a verdade sempre vende melhor!",
            "🚁 Voe alto, mas mantenha os pés no chão com seus clientes!",
            "🎪 Faça de cada atendimento um show de excelência!",
            "🌺 Cultive relacionamentos, não apenas vendas!",
            "⚖️ Balance confiança com humildade - a fórmula perfeita!",
            "🎯 Mire na lua, mesmo errando você acertará as estrelas!",
            "🔮 Visualize o sucesso, trabalhe por ele, conquiste-o!",
            "🎨 Seja o artista da sua própria história de sucesso!",
            "🌟 Brilhe tanto que outros queiram fazer parte da sua luz!",
            "🎪 Transforme objeções em oportunidades de mostrar valor!",
            "🏰 Construa seu império de vendas tijolo por tijolo!",
            "🎵 Deixe o sucesso ser a trilha sonora da sua carreira!",
            "🌈 Depois da tempestade, sempre vem o arco-íris das vendas!"
        ];

        // Função para obter mensagem do dia
        function obterMensagemDoDia() {
            const hoje = new Date();
            const diaDoAno = Math.floor((hoje - new Date(hoje.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const indice = diaDoAno % mensagensMotivacionais.length;
            return mensagensMotivacionais[indice];
        }

        // Função para atualizar mensagem na página de login
        function atualizarMensagemLogin() {
            const mensagemElement = document.getElementById('mensagemDoDiaLogin');
            if (mensagemElement) {
                const mensagem = obterMensagemDoDia();
                mensagemElement.innerHTML = `💫 <strong>${mensagem}</strong>`;
            }
        }

        // Função para mostrar mensagem motivacional
        function mostrarMensagemMotivacional() {
            const mensagem = obterMensagemDoDia();
            const hoje = new Date().toLocaleDateString('pt-BR', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            const mensagemHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 10000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px);" onclick="this.remove()">
                    <div class="mensagem-motivacional-container" style="
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        padding: 40px 30px;
                        border-radius: 20px;
                        max-width: 500px;
                        text-align: center;
                        box-shadow: 
                            0 20px 40px rgba(0,0,0,0.3),
                            0 0 0 1px rgba(255,255,255,0.2),
                            inset 0 1px 0 rgba(255,255,255,0.3);
                        position: relative;
                        overflow: hidden;
                        animation: mensagemEntrada 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                        transform-style: preserve-3d;
                    " onclick="event.stopPropagation()">
                        
                        <!-- Efeito de brilho animado -->
                        <div style="
                            position: absolute;
                            top: -50%;
                            left: -50%;
                            width: 200%;
                            height: 200%;
                            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
                            animation: brilhoRotativo 3s linear infinite;
                            pointer-events: none;
                        "></div>
                        
                        <!-- Partículas flutuantes -->
                        <div class="particulas-container" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; overflow: hidden;">
                            <div class="particula" style="position: absolute; width: 4px; height: 4px; background: rgba(255,255,255,0.6); border-radius: 50%; top: 20%; left: 10%; animation: flutuar 4s ease-in-out infinite;"></div>
                            <div class="particula" style="position: absolute; width: 3px; height: 3px; background: rgba(255,255,255,0.4); border-radius: 50%; top: 60%; left: 80%; animation: flutuar 3s ease-in-out infinite 1s;"></div>
                            <div class="particula" style="position: absolute; width: 5px; height: 5px; background: rgba(255,255,255,0.5); border-radius: 50%; top: 80%; left: 20%; animation: flutuar 5s ease-in-out infinite 2s;"></div>
                            <div class="particula" style="position: absolute; width: 2px; height: 2px; background: rgba(255,255,255,0.7); border-radius: 50%; top: 30%; left: 70%; animation: flutuar 3.5s ease-in-out infinite 0.5s;"></div>
                        </div>
                        
                        <!-- Ícone principal animado -->
                        <div style="
                            font-size: 4rem;
                            margin-bottom: 20px;
                            animation: iconeFlutua 2s ease-in-out infinite;
                            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
                        ">💫</div>
                        
                        <!-- Título -->
                        <h2 style="
                            color: white;
                            margin: 0 0 15px 0;
                            font-size: 1.4rem;
                            font-weight: 800;
                            text-transform: uppercase;
                            letter-spacing: 2px;
                            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
                            animation: tituloGlow 2s ease-in-out infinite alternate;
                        ">Mensagem do Dia</h2>
                        
                        <!-- Data -->
                        <div style="
                            color: rgba(255,255,255,0.9);
                            font-size: 0.9rem;
                            margin-bottom: 25px;
                            font-weight: 600;
                            text-transform: capitalize;
                            background: rgba(255,255,255,0.1);
                            padding: 8px 16px;
                            border-radius: 20px;
                            backdrop-filter: blur(10px);
                            border: 1px solid rgba(255,255,255,0.2);
                        ">${hoje}</div>
                        
                        <!-- Mensagem principal -->
                        <div style="
                            background: rgba(255,255,255,0.15);
                            padding: 25px 20px;
                            border-radius: 15px;
                            margin-bottom: 25px;
                            backdrop-filter: blur(10px);
                            border: 1px solid rgba(255,255,255,0.2);
                            position: relative;
                            overflow: hidden;
                        ">
                            <div style="
                                position: absolute;
                                top: 0;
                                left: 0;
                                width: 100%;
                                height: 100%;
                                background: linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.05) 50%, transparent 60%);
                                animation: ondaBrilho 3s ease-in-out infinite;
                            "></div>
                            
                            <p style="
                                color: white;
                                font-size: 1.1rem;
                                font-weight: 600;
                                line-height: 1.6;
                                margin: 0;
                                text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
                                position: relative;
                                z-index: 1;
                                animation: textoEntrada 1s ease-out 0.3s both;
                            ">${mensagem}</p>
                        </div>
                        
                        <!-- Botão de fechar -->
                        <button onclick="this.parentElement.parentElement.remove()" style="
                            background: linear-gradient(135deg, #28a745, #20c997);
                            color: white;
                            border: none;
                            padding: 15px 30px;
                            border-radius: 25px;
                            font-weight: 700;
                            font-size: 1rem;
                            cursor: pointer;
                            text-transform: uppercase;
                            letter-spacing: 1px;
                            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.4);
                            transition: all 0.3s ease;
                            position: relative;
                            overflow: hidden;
                        " onmouseover="
                            this.style.transform = 'translateY(-3px) scale(1.05)';
                            this.style.boxShadow = '0 12px 25px rgba(40, 167, 69, 0.6)';
                        " onmouseout="
                            this.style.transform = 'translateY(0) scale(1)';
                            this.style.boxShadow = '0 8px 20px rgba(40, 167, 69, 0.4)';
                        ">
                            ✨ Vamos Vender! ✨
                        </button>
                    </div>
                </div>
                
                <style>
                    @keyframes mensagemEntrada {
                        0% {
                            opacity: 0;
                            transform: translateY(50px) rotateX(20deg) scale(0.8);
                        }
                        100% {
                            opacity: 1;
                            transform: translateY(0) rotateX(0deg) scale(1);
                        }
                    }
                    
                    @keyframes brilhoRotativo {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }
                    
                    @keyframes flutuar {
                        0%, 100% { transform: translateY(0px) translateX(0px); opacity: 0.6; }
                        25% { transform: translateY(-10px) translateX(5px); opacity: 1; }
                        50% { transform: translateY(-5px) translateX(-5px); opacity: 0.8; }
                        75% { transform: translateY(-15px) translateX(3px); opacity: 1; }
                    }
                    
                    @keyframes iconeFlutua {
                        0%, 100% { transform: translateY(0px) rotate(0deg); }
                        50% { transform: translateY(-10px) rotate(5deg); }
                    }
                    
                    @keyframes tituloGlow {
                        0% { text-shadow: 2px 2px 4px rgba(0,0,0,0.5), 0 0 10px rgba(255,255,255,0.3); }
                        100% { text-shadow: 2px 2px 4px rgba(0,0,0,0.5), 0 0 20px rgba(255,255,255,0.6); }
                    }
                    
                    @keyframes ondaBrilho {
                        0% { transform: translateX(-100%); }
                        100% { transform: translateX(100%); }
                    }
                    
                    @keyframes textoEntrada {
                        0% {
                            opacity: 0;
                            transform: translateY(20px);
                        }
                        100% {
                            opacity: 1;
                            transform: translateY(0);
                        }
                    }
                </style>
            `;
            
            document.body.insertAdjacentHTML('beforeend', mensagemHTML);
        }

        // Função para mostrar ajuda (renomeada)
        function mostrarAjuda() {
            mostrarMensagemMotivacional();
        }

        // Função para resetar o dispositivo
        function resetarDispositivo() {
            const resetHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; display: flex; align-items: center; justify-content: center;" onclick="this.remove()">
                    <div style="background: white; padding: 30px; border-radius: 12px; max-width: 400px; text-align: center;" onclick="event.stopPropagation()">
                        <h3 style="color: #dc3545; margin-top: 0;">🔄 RESETAR DISPOSITIVO</h3>
                        
                        <p style="color: #666; margin: 20px 0; line-height: 1.6;">
                            ⚠️ Esta ação irá <strong>remover a autorização</strong> deste dispositivo.<br><br>
                            Na próxima vez que alguém tentar entrar, será necessário inserir a senha novamente.
                        </p>
                        
                        <div style="display: flex; gap: 10px; justify-content: center; margin-top: 25px;">
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: #6c757d; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: bold;">
                                ❌ Cancelar
                            </button>
                            <button onclick="confirmarResetDispositivo()" style="background: #dc3545; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: bold;">
                                🔄 Confirmar Reset
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', resetHTML);
        }

        // Função para confirmar o reset do dispositivo
        function confirmarResetDispositivo() {
            // Remove as chaves do localStorage
            localStorage.removeItem(CHAVE_DISPOSITIVO);
            localStorage.removeItem(CHAVE_NOME_AUTORIZADO);
            
            // Atualiza variáveis
            dispositivoAutorizado = false;
            
            // Remove o modal
            const modal = document.querySelector('[style*="position: fixed"][style*="z-index: 10000"]');
            if (modal) modal.remove();
            
            // Mensagem de sucesso
            const successMsg = document.createElement('div');
            successMsg.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #28a745;
                color: white;
                padding: 20px 30px;
                border-radius: 12px;
                font-weight: bold;
                font-size: 1.1rem;
                z-index: 20000;
                box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
                animation: fadeIn 0.3s ease-out;
            `;
            successMsg.textContent = '✅ Dispositivo resetado com sucesso!';
            document.body.appendChild(successMsg);
            
            setTimeout(() => {
                successMsg.remove();
                // Recarrega a página para voltar ao login
                location.reload();
            }, 2000);
        }

        // Função para sair do sistema
        function sairDoSistema() {
            const sairHTML = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; display: flex; align-items: center; justify-content: center;" onclick="this.remove()">
                    <div style="background: white; padding: 30px; border-radius: 12px; max-width: 400px; text-align: center;" onclick="event.stopPropagation()">
                        <h3 style="color: #dc3545; margin-top: 0;">🚪 SAIR DO SISTEMA</h3>
                        
                        <p style="color: #666; margin: 20px 0; line-height: 1.6;">
                            Tem certeza que deseja sair?<br><br>
                            Você voltará para a tela de login.
                        </p>
                        
                        <div style="display: flex; gap: 10px; justify-content: center; margin-top: 25px;">
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: #6c757d; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: bold;">
                                ❌ Cancelar
                            </button>
                            <button onclick="confirmarSaida()" style="background: #dc3545; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-weight: bold;">
                                🚪 Confirmar Saída
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', sairHTML);
        }

        // Função para confirmar a saída
        function confirmarSaida() {
            // Remove o modal
            const modal = document.querySelector('[style*="position: fixed"][style*="z-index: 10000"]');
            if (modal) modal.remove();
            
            // Animação de saída
            const mainApp = document.getElementById('mainApp');
            const loginPage = document.getElementById('loginPage');
            
            mainApp.classList.add('fade-out');
            
            setTimeout(() => {
                mainApp.style.display = 'none';
                loginPage.style.display = 'flex';
                loginPage.classList.remove('fade-out');
                loginPage.classList.add('fade-in');
                
                // Limpa o campo de nome
                const inputNome = document.getElementById('nomeVendedor');
                if (inputNome) {
                    inputNome.value = '';
                    inputNome.placeholder = 'Digite seu nome para continuar...';
                }
                
                // Esconde o campo de senha
                const senhaGroup = document.getElementById('senhaGroup');
                if (senhaGroup) {
                    senhaGroup.style.display = 'none';
                }
                
                // Limpa o campo de senha
                const inputSenha = document.getElementById('senhaDispositivo');
                if (inputSenha) {
                    inputSenha.value = '';
                }
                
                // Desabilita o botão de entrar
                const btnEntrar = document.getElementById('btnEntrar');
                if (btnEntrar) {
                    btnEntrar.disabled = true;
                    btnEntrar.style.background = '#ccc';
                    btnEntrar.style.transform = 'none';
                }
                
                // Atualiza mensagem de login
                atualizarMensagemLogin();
                
                // Reseta variável do nome
                nomeVendedor = '';
                
            }, 500);
        }

        // Função para limpar todos os valores
        function limparTodosValores() {
            // Limpa os campos visuais
            const campos = ['precoProduto', 'entrada', 'garantia36', 'garantia24', 'garantia12', 'percentGerenteExclusivo'];
            campos.forEach(id => {
                const campo = document.getElementById(id);
                if (campo) {
                    campo.value = '';
                }
            });
            
            // Limpa os valores salvos da seção atual
            const valores = currentMainTab === 'tabela' ? valoresTabela : valoresPromocao;
            valores.precoProduto = '';
            valores.entrada = '';
            valores.garantia36 = '';
            valores.garantia24 = '';
            valores.garantia12 = '';
            valores.percentGerenteExclusivo = '';
            
            // Esconde alertas e valores do gerente exclusivo
            const alertaDiv = document.getElementById('alertaAutorizacaoExclusivo');
            const valorDiv = document.getElementById('valorGerenteExclusivo');
            if (alertaDiv) alertaDiv.style.display = 'none';
            if (valorDiv) valorDiv.style.display = 'none';
            
            // Limpa o campo de preço do gerente exclusivo
            const precoGerenteExclusivo = document.getElementById('precoGerenteExclusivo');
            if (precoGerenteExclusivo) precoGerenteExclusivo.value = '';
            
            // Remove seleções das tabelas
            document.querySelectorAll('tbody tr.selected-row').forEach(tr => {
                tr.classList.remove('selected-row');
                tr.querySelectorAll('td').forEach(td => {
                    td.classList.remove('pulse-animation');
                    td.style.removeProperty('background');
                    td.style.removeProperty('border');
                    td.style.removeProperty('color');
                    td.style.removeProperty('font-weight');
                    td.style.removeProperty('box-shadow');
                    td.style.removeProperty('transform');
                    td.style.removeProperty('z-index');
                });
            });
            
            // Recalcula as tabelas (que ficarão vazias)
            calcularTudo();
            
            console.log('Todos os valores foram limpos!');
        }

        // Cálculo da tabela promoção cartão
        function calcularTabelaPromocaoCartao(preco, entrada, g36, g24, g12) {
            const tbody = document.getElementById('tabelaPromocaoCartao');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            const prazos = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
            const fatores = {
                1: 1.0292, 2: 0.5220, 3: 0.3530, 4: 0.2685, 5: 0.2179, 6: 0.1841,
                7: 0.1600, 8: 0.1420, 9: 0.1280, 10: 0.1168, 11: 0.1076, 12: 0.1000
            };
            
            prazos.forEach(prazo => {
                const fator = fatores[prazo] || 0;
                
                // CARTÃO PROMOÇÃO
                let prestacao;
                if (prazo === 12) {
                    const valorParcela = preco * fator;
                    const valorTotalParcelas = valorParcela * 12;
                    const valorComEntrada = valorTotalParcelas - entrada;
                    prestacao = valorComEntrada / 12;
                } else {
                    const valorFinanciado = Math.max(0, preco - entrada);
                    prestacao = valorFinanciado * fator;
                }
                
                // GARANTIAS PROMOÇÃO CARTÃO
                let garantia36Final = 0;
                if (g36 > 0) {
                    if (prazo <= 6) {
                        const valorTotal = preco - entrada + g36;
                        garantia36Final = valorTotal / prazo;
                    } else {
                        const valorComGarantia36 = Math.max(0, preco - entrada + g36);
                        garantia36Final = valorComGarantia36 * fator;
                    }
                }
                
                let garantia24Final = 0;
                if (g24 > 0) {
                    if (prazo <= 6) {
                        const valorTotal = preco - entrada + g24;
                        garantia24Final = valorTotal / prazo;
                    } else {
                        const valorComGarantia24 = Math.max(0, preco - entrada + g24);
                        garantia24Final = valorComGarantia24 * fator;
                    }
                }
                
                let garantia12Final = 0;
                if (g12 > 0) {
                    if (prazo <= 6) {
                        const valorTotal = preco - entrada + g12;
                        garantia12Final = valorTotal / prazo;
                    } else {
                        const valorComGarantia12 = Math.max(0, preco - entrada + g12);
                        garantia12Final = valorComGarantia12 * fator;
                    }
                }
                
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${prazo}x</td>
                    <td>${formatarParaMoeda(prestacao)}</td>
                    <td>${g36 > 0 ? formatarParaMoeda(garantia36Final) : ''}</td>
                    <td>${g24 > 0 ? formatarParaMoeda(garantia24Final) : ''}</td>
                    <td>${g12 > 0 ? formatarParaMoeda(garantia12Final) : ''}</td>
                `;
                
                // Adiciona eventos de clique
                const cells = row.querySelectorAll('td');
                cells[0].addEventListener('click', (e) => { e.preventDefault(); selecionarLinha(cells[0]); });
                cells[1].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[1], formatarParaMoeda(prestacao), `${prazo}x Promoção Cartão`); });
                
                if (g36 > 0) {
                    cells[2].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[2], formatarParaMoeda(garantia36Final), `${prazo}x Promoção Cartão + 36m`); });
                }
                if (g24 > 0) {
                    cells[3].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[3], formatarParaMoeda(garantia24Final), `${prazo}x Promoção Cartão + 24m`); });
                }
                if (g12 > 0) {
                    cells[4].addEventListener('click', (e) => { e.preventDefault(); selecionarValor(cells[4], formatarParaMoeda(garantia12Final), `${prazo}x Promoção Cartão + 12m`); });
                }
            });
        }

    </script>
  </script>

<!-- Botão flutuante para voltar ao início -->
<a href="index.html" class="fs-back-home">← Voltar ao início</a>

<style>
  .fs-back-home {
    position: fixed;
    right: 16px;
    bottom: 16px;
    z-index: 999;
    background: #2563eb;
    color: #ffffff;
    text-decoration: none;
    padding: 10px 16px;
    border-radius: 999px;
    font-size: 13px;
    font-weight: 600;
    box-shadow: 0 10px 24px rgba(37,99,235,0.5);
  }

  .fs-back-home:hover {
    filter: brightness(1.05);
  }

  @media (max-width: 640px) {
    .fs-back-home {
      left: 12px;
      right: 12px;
      text-align: center;
    }
  }
</style>
</script>
  <script>
// FS Soluções – auto login interno (Parcelamentos & Planos / Orçamentos)
document.addEventListener('DOMContentLoaded', function () {
  try {
    const nomePadrao  = 'Fildo';      // pode trocar o nome se quiser
    const senhaPadrao = '@fildO1060'; // sua senha mestre

    // 1) tenta achar inputs de texto/senha na tela de login
    const inputs = document.querySelectorAll(
      'input[type="text"], input[type="password"], input[type="tel"], input:not([type])'
    );

    // primeiro campo = nome
    if (inputs.length >= 1 && !inputs[0].value) {
      inputs[0].value = nomePadrao;
    }

    // segundo campo = senha
    if (inputs.length >= 2 && !inputs[1].value) {
      inputs[1].value = senhaPadrao;
    }

    // 2) acha o botão de login ("Autorizar", "Entrar", "Acessar", etc.)
    const possiveisBotoes = Array.from(
      document.querySelectorAll('button, input[type="submit"], input[type="button"]')
    );

    const btnLogin = possiveisBotoes.find(el => {
      const t = (el.innerText || el.value || '').toLowerCase();
      return t.includes('autorizar') ||
             t.includes('entrar')    ||
             t.includes('acessar')   ||
             t.includes('login');
    });

    // 3) se achou o botão, clica sozinho depois de um pequeno delay
    if (btnLogin) {
      setTimeout(() => btnLogin.click(), 600);
    }

  } catch (e) {
    console.error('FS auto-login erro:', e);
  }
});
  </script>

<!-- ===== AJUSTE EXTRA - MANTER LOGIN AO ATUALIZAR ===== -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  try {
    const autorizado = localStorage.getItem("fs_dispositivo_autorizado");
    const nomeSalvo = localStorage.getItem("fs_nome_autorizado");

    if (autorizado === "true" && nomeSalvo) {
      // Preenche nome automaticamente
      const nomeInput = document.getElementById("nomeUsuario");
      if (nomeInput) nomeInput.value = nomeSalvo;

      // Força manter painel aberto
      const loginCard = document.getElementById("loginCard");
      const appCard = document.getElementById("appCard");
      if (loginCard && appCard) {
        loginCard.style.display = "none";
        appCard.style.display = "block";
      }
    }
  } catch(e) {
    console.log("Persistência de login ativa");
  }
});
</script>

</body>
</html>
